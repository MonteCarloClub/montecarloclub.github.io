import{a as C,d as w,r as v,o as q,b as h,c as _,e as I,p as j,f as H,g as x,h as ie,n as z,u as y,i as L,F as $,j as le,s as K,k as ce,l as A,w as J,m as P,q as Q,t as ue,v as de,x as he,y as fe,A as pe,z as ve,B as _e}from"./vendor.21a53a0c.js";const me=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}};me();const R={bankImageSize:64,blockSize:10,blockGap:2,blockNumPerRow:5},U={dataBlockSize:20},V={signalSpeed:5,signalSize:5,signalColor:"hsl(217, 87%, 32%)"};function ye(e,t){C({targets:e,width:80,height:80,borderRadius:["0%","50%"],easing:"easeInOutSine",complete:t})}function ge(e,t,a){C({targets:e,width:t,height:t,backgroundColor:"#000",borderRadius:["0%"],complete:a})}function X(e,t,a){C({targets:e,left:t.x,top:t.y,easing:"easeInOutExpo",complete:a})}function Y(e,t){C({targets:e,opacity:0,complete:t})}function be(e,t){C({targets:e,width:400,complete:t})}var N=(e,t)=>{const a=e.__vccOpts||e;for(const[o,s]of t)a[o]=s;return a};const ke=e=>(j("data-v-521c1567"),e=e(),H(),e),xe={key:0},Se=ke(()=>x("div",{class:"header"},[x("div",{class:"header-title"}," \u5B66\u4E60\u6210\u679C ")],-1)),we=[Se],ze=w({emits:["formFilled","shrinked"],setup(e,{expose:t,emit:a}){const o=v(null),s=v(!1),n=()=>{s.value=!0,o.value&&be(o.value,()=>{f()})},r=()=>{a("formFilled")},f=()=>{o.value&&ye(o.value,()=>{r()})};return q(()=>{n()}),t({transformToData:()=>{s.value=!1,o.value&&ge(o.value,U.dataBlockSize,()=>{o.value&&Y(o.value),a("shrinked")})}}),(p,d)=>(h(),_("div",{class:"input-form",ref_key:"refData",ref:o},[s.value?(h(),_("div",xe,we)):I("",!0)],512))}});var Ne=N(ze,[["__scopeId","data-v-521c1567"]]);function Fe(e,t){const a=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=(t.x-e.x)/a,s=(t.y-e.y)/a;return{dis:a,dir:{x:o,y:s}}}function Be(e,t,a){const o=e.width,s=e.height,n=e.getContext("2d");if(!n)return null;var r={count:t.length*2,spawnChance:.3,sparkChance:.1,sparkDist:10,sparkSize:2,speed:a.speed,neonSize:a.neonSize,repaintAlpha:.9,shadowToTimePropMult:6,color:a.color};function f(){const i=Math.round(Math.random()*(t.length-1)),u=t[i],l=u.neighbors,m=Math.round(Math.random()*(l.length-1)),b=t[l[m]],{dis:F,dir:T}=Fe(u,b);return{from:u,dis:F,dir:T}}let c=[];const p=function(){this.reset()};p.prototype.reset=function(){const{from:i,dis:u,dir:l}=f();this.distance=u,this.x=i.x,this.y=i.y,this.vx=r.speed*l.x,this.vy=r.speed*l.y,this.process=0,this.color=r.color},p.prototype.step=function(){const i=this.process/this.distance;i>.99&&this.reset();const u=this.vx*(2-i),l=this.vy*(2-i);if(this.process+=Math.sqrt(u*u+l*l),this.x+=u,this.y+=l,n.shadowBlur=i*r.shadowToTimePropMult,n.fillStyle=n.shadowColor=this.color,n.fillRect(this.x,this.y,r.neonSize,r.neonSize),Math.random()<r.sparkChance){const m=this.x+Math.random()*r.sparkDist*(Math.random()<.5?1:-1)-r.sparkSize/2,b=this.y+Math.random()*r.sparkDist*(Math.random()<.5?1:-1)-r.sparkSize/2;n.fillRect(m,b,r.sparkSize,r.sparkSize)}};function d(){if(!!n){requestAnimationFrame(d);for(var i=n.getImageData(0,0,o,s).data,u=n.createImageData(o,s),l=0;l<u.data.length;l+=4){u.data[l+0]=i[l+0],u.data[l+1]=i[l+1],u.data[l+2]=i[l+2];let m=i[l+3]*r.repaintAlpha;u.data[l+3]=m>20?m:0}n.putImageData(u,0,0),c.length<r.count&&Math.random()<r.spawnChance&&c.push(new p),c.map(function(m){m.step()})}}return{init:function(){requestAnimationFrame(d)}}}const Ce=w({props:{width:{type:Number,default:800},height:{type:Number,default:500},nodes:{type:Array,default:null}},setup(e){const t=e,a=ie(()=>({width:t.width,height:t.height})),o=v(null);return q(()=>{const s=o.value;if(s){s.width=t.width,s.height=t.height;var n=Be(s,t.nodes,{speed:V.signalSpeed,neonSize:V.signalSize,color:V.signalColor});n==null||n.init()}}),(s,n)=>(h(),_("canvas",{ref_key:"canvasEl",ref:o,class:"path-canvas",style:z(y(a))},null,4))}});var Ie=N(Ce,[["__scopeId","data-v-578a9ead"]]);const Me=w({props:{startIndex:{type:Number,default:-1},nodes:{type:Array,default:null},blockSize:{type:Number,default:U.dataBlockSize},blockColor:{type:String,default:"#000"}},emits:["arrived","finished"],setup(e,{expose:t,emit:a}){const o=e,s=v([]),n=[],r=c=>{n[c]=!0;for(const p of o.nodes[c].neighbors)n[p]||(n[p]=!0,f(o.nodes[c],p))};function f(c,p){const d=s.value[p];d.style.left=c.x+"px",d.style.top=c.y+"px",d.style.opacity="1";const i=o.nodes[p];X(d,{x:i.x,y:i.y},()=>{Y(d),a("arrived",p),r(p)})}return t({broadcastFrom:c=>{f(o.nodes[c],c)}}),(c,p)=>(h(!0),_($,null,L(e.nodes,(d,i)=>(h(),_("div",{ref_for:!0,ref:u=>{s.value[i]=u},class:"node",style:z({opacity:0,width:e.blockSize+"px",height:e.blockSize+"px",backgroundColor:e.blockColor})},null,4))),256))}});var De=N(Me,[["__scopeId","data-v-a6ff7abc"]]),$e="/bank/assets/bank.dea6af03.svg",Ae="/bank/assets/bankBlue.efea8b5c.svg";const Z=e=>(j("data-v-2d4a7675"),e=e(),H(),e),Pe={key:0},Re=Z(()=>x("img",{src:$e,alt:"\u5B66\u5206\u94F6\u884C"},null,-1)),Ee=[Re],Te={key:1},Oe=Z(()=>x("img",{src:Ae,alt:"\u5B66\u5206\u94F6\u884C"},null,-1)),qe=[Oe],Le={props:{startIndex:{type:Number,default:-1},bankSize:{type:Number,default:R.bankImageSize},blockSize:{type:Number,default:R.blockSize},blockGap:{type:Number,default:R.blockGap},blockNumPerRow:{type:Number,default:R.blockNumPerRow},svgColor:{type:String,default:"black"}},setup(e,{expose:t}){let a=v([]);return t({addBlock:s=>{a.value.push(s)}}),(s,n)=>(h(),_("div",{class:"bank",style:z({width:e.bankSize})},[e.svgColor==="black"?(h(),_("div",Pe,Ee)):(h(),_("div",Te,qe)),x("div",{class:"blocks",style:z({gap:e.blockGap+"px",width:e.blockNumPerRow*e.blockSize+(e.blockNumPerRow-1)*e.blockGap+"px"})},[(h(!0),_($,null,L(y(a),r=>(h(),_("div",{style:z({width:e.blockSize+"px",height:e.blockSize+"px",backgroundColor:r})},null,4))),256))],4)],4))}};var Ve=N(Le,[["__scopeId","data-v-2d4a7675"]]);const Ge=2,ee=le({id:"animate",state:()=>({isStep:!0,mode:0,isStepFinished:!0,isNext:!1}),actions:{changeMode(){this.mode=(this.mode+1)%Ge,this.mode===0?this.isStep=!0:this.isStep=!1},nextStep(){this.isStepFinished=!1,this.isNext=!0},finishedStep(){this.isNext=!1,this.isStepFinished=!0}}});const We={class:"center"},je=Q("\u4E0B\u4E00\u6B65"),He=w({setup(e){const t=ee(),a=["\u5355\u6B65","\u5FAA\u73AF"],{isStep:o,mode:s,isStepFinished:n,isNext:r}=K(t),f=()=>{t.changeMode()},c=()=>{t.nextStep()};return(p,d)=>{const i=ce("a-button");return h(),_("div",We,[A(i,{type:"primary",ghost:"",onClick:f},{default:J(()=>[Q(ue(a[y(s)]),1)]),_:1}),y(o)?(h(),P(i,{key:0,type:"primary",ghost:"",disabled:!y(n),onClick:c},{default:J(()=>[je]),_:1},8,["disabled"])):I("",!0)])}}});var Ke=N(He,[["__scopeId","data-v-a81b92fa"]]);const M=[{x:31,y:20,neighbors:[2,3],color:"bisque"},{x:82,y:19,neighbors:[3,5],color:"bisque"},{x:21,y:56,neighbors:[4],color:"bisque"},{x:60,y:48,neighbors:[0,1,2],color:"black"},{x:50,y:84,neighbors:[2,3,5],color:"black"},{x:84,y:62,neighbors:[4],color:"black"},{x:8,y:28,neighbors:[0,2],color:"black"},{x:13,y:80,neighbors:[4,2],color:"black"},{x:53,y:10,neighbors:[0,1],color:"black"}];function Je(e,t){for(let a=0;a<M.length;a++){const o=M[a];o.x=Math.round(o.x/100*e),o.y=Math.round(o.y/100*t),o.neighbors.forEach(s=>{M[s].neighbors.includes(a)||M[s].neighbors.push(a)})}return M}const Qe={class:"fullscreen"},Ue={class:"switch"},Xe=w({setup(e){const t=ee(),{isStep:a,mode:o,isStepFinished:s,isNext:n}=K(t),r=v(null);let f=v([]),c=v(0),p=v(0);q(()=>{var S;const g=(S=r.value)==null?void 0:S.getClientRects();if(g&&(g==null?void 0:g.length)>0){const{width:k,height:D}=g[0];f.value=Je(k,D),p.value=D,c.value=k}});let d=0;de(()=>n.value,()=>{n.value===!0&&(d===0?u():d===1&&G())});const i=v(!1),u=()=>{i.value=!0},l=v(null),m=v(null),b=v(-1),F=v(!1),T=()=>{b.value=Math.round(Math.random()*(f.value.length-1));const g=f.value[b.value],{x:S,y:k}=g;l.value&&X(l.value,{x:S,y:k},()=>{m.value&&(m.value.transformToData(),F.value=!0)})},B=v(null),G=()=>{d===0&&(d=1,t.finishedStep()),(B.value&&!a.value||B.value&&a.value&&n.value)&&(d=2,B.value.broadcastFrom(b.value),i.value=!1)},W=v([]);let O=0;const ae=g=>{W.value[g].addBlock("#000"),O+=1,O===f.value.length&&(O=0,ne())},ne=()=>{t.finishedStep(),F.value=!1,d=0,a.value||u()};return(g,S)=>(h(),_($,null,[x("div",{ref_key:"refWindow",ref:r,class:"fullscreen"},[y(c)>0?(h(),P(Ie,{key:0,width:y(c),height:y(p),nodes:y(f)},null,8,["width","height","nodes"])):I("",!0),F.value?(h(),P(De,{key:1,ref_key:"refBroadcast",ref:B,nodes:y(f),startIndex:b.value,onArrived:ae},null,8,["nodes","startIndex"])):I("",!0),(h(!0),_($,null,L(y(f),(k,D)=>(h(),_("div",{class:"node",style:z({left:k.x+"px",top:k.y+"px"})},[A(Ve,{ref_for:!0,ref:re=>{W.value[D]=re},svgColor:k.color},null,8,["svgColor"])],4))),256))],512),x("div",Qe,[i.value?(h(),_("div",{key:0,ref_key:"refDataSource",ref:l,class:"data-source"},[A(Ne,{onFormFilled:T,onShrinked:G,ref_key:"refDataSourceForm",ref:m},null,512)],512)):I("",!0)]),x("div",Ue,[A(Ke)])],64))}});var te=N(Xe,[["__scopeId","data-v-07486382"]]),Ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:te});const Ze=w({setup(e){return(t,a)=>(h(),P(te))}}),et="modulepreload",se={},tt="/bank/",st=function(t,a){return!a||a.length===0?t():Promise.all(a.map(o=>{if(o=`${tt}${o}`,o in se)return;se[o]=!0;const s=o.endsWith(".css"),n=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const r=document.createElement("link");if(r.rel=s?"stylesheet":et,s||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),s)return new Promise((f,c)=>{r.addEventListener("load",f),r.addEventListener("error",c)})})).then(()=>t())},oe=he({history:fe(),routes:[{path:"/",component:()=>st(()=>Promise.resolve().then(function(){return Ye}),void 0)}]});function ot(e){e.use(oe)}function at(e){e.use(pe)}const nt=ve();function rt(e){e.use(nt)}const E=_e(Ze);ot(E);at(E);rt(E);oe.isReady().then(()=>{E.mount("#app")});
