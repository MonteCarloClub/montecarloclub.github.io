import{c as R,g as S,B as I,I as C,S as P,m as c,f as V,R as L}from"./Blockchain.8b2b2ccb.js";import{_ as W}from"./index.27017b01.js";import{d as N,r as h,o as _,b as F,e as f,F as B,i as z,l as d,f as v,s as H}from"./vendor.2e2e4d27.js";const O={class:"fullscene"},T={class:"fullscene"},j={class:"footer"},q=N({setup(G){const b=[{x:15,y:50,role:"block",title:"\u533A\u5757"},{x:40,y:50,role:"block",title:"\u533A\u5757"},{x:65,y:50,role:"block",title:"\u533A\u5757"},{x:85,y:50,role:"user",title:"\u5B66\u4E60\u8005"},{x:40,y:80,role:"institution",title:"\u53D1\u8BC1\u673A\u6784"},{x:40,y:20,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"}],E=h(null),{nodes:i,screenWidth:m,screenHeight:g}=R(E,b),p=h(null),s=h(null),y=h(null),k=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((a,n)=>{const e=i.value.filter(l=>l.role==="bank");e.length===0&&n(1);const t=e[0],u=p.value;u.style.left=t.x+"px",u.style.top=t.y+"px",u.style.opacity="1";const o=i.value.filter(l=>l.role==="block");o.length===0&&n(1);const r=o[0];p.value&&c(p.value,{x:r.x,y:r.y-64},()=>a(1))})},{title:"\u4E2A\u4F53\u6388\u6743\u673A\u6784\u516C\u5F00\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((a,n)=>{const e=i.value.filter(l=>l.role==="user");e.length===0&&n(1);const t=e[0],u=s.value;u.style.left=t.x+"px",u.style.top=t.y+"px",u.style.opacity="1";const o=i.value.filter(l=>l.role==="institution");o.length===0&&n(1);const r=o[0];s.value&&c(s.value,{x:r.x,y:r.y-64},()=>a(1))})},{title:"\u673A\u6784\u9A8C\u8BC1\u540E\u516C\u5F00\u5B66\u4E60\u6210\u679C\u4E0A\u94FE",handler:()=>new Promise((a,n)=>{const e=s.value,t=y.value;t.style.left=e.style.left,t.style.top=e.style.top,t.style.opacity="1";const u=i.value.filter(x=>x.role==="block");u.length===0&&n(1);const o=u[1];let r=0;const l=()=>{r+=1,r===2&&a(1)};y.value&&c(y.value,{x:o.x,y:o.y-64},l),s.value&&V(s.value,l)})},{title:"\u4E2A\u4F53\u516C\u5F00\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((a,n)=>{const e=i.value.filter(l=>l.role==="user");e.length===0&&n(1);const t=e[0],u=s.value;u.style.left=t.x+"px",u.style.top=t.y+"px",u.style.opacity="1";const o=i.value.filter(l=>l.role==="block");o.length===0&&n(1);const r=o[2];s.value&&c(s.value,{x:r.x,y:r.y-64},()=>a(1))})},{title:"\u7ECF\u8FC7\u667A\u80FD\u5408\u7EA6\u9A8C\u8BC1\u540E\u5BFC\u5165\u5B66\u5206\u94F6\u884C",handler:()=>new Promise((a,n)=>{const e=i.value.filter(D=>D.role==="bank");e.length===0&&n(1);const t=e[0],u=p.value,o=parseInt(u.style.left),r=parseInt(u.style.top);let l=0;const x=()=>{l+=1,l===2&&s.value&&c(s.value,{x:t.x,y:t.y-64},()=>a(1))};s.value&&c(s.value,{x:o+128+64,y:r},x),y.value&&c(y.value,{x:o+96,y:r},x)})},{title:"\u4ECE\u5B66\u5206\u94F6\u884C\u4E2D\u8BBF\u95EE\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((a,n)=>{const e=i.value.filter(u=>u.role==="user");e.length===0&&n(1);const t=e[0];s.value&&c(s.value,{x:t.x,y:t.y-64},()=>{a(1)})})}],{running:A,currentStep:w}=S(k,1);return(a,n)=>(_(),F(B,null,[f("div",{class:"scene",ref_key:"refWindow",ref:E},[f("div",O,[(_(!0),F(B,null,z(d(i),(e,t)=>(_(),F("div",{class:"node",style:H({left:e.x+"px",top:e.y+"px"})},[v(L,{role:e.role,title:e.title},null,8,["role","title"])],4))),256)),v(I,{nodes:d(i),width:d(m),height:d(g)},null,8,["nodes","width","height"])]),f("div",T,[f("div",{ref_key:"refSmartContract",ref:p,style:{opacity:0},class:"node"},[v(C,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),f("div",{ref_key:"refLearningRecords",ref:s,style:{opacity:0},class:"node"},[v(C,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),f("div",{ref_key:"refVerifyRecords",ref:y,style:{opacity:0},class:"node"},[v(C,{type:"credential",title:"\u5B66\u4E60\u6210\u679C\u8BC1\u660E"})],512)])],512),f("div",j,[v(P,{current:d(w),steps:k,disabled:d(A)},null,8,["current","disabled"])])],64))}});var Q=W(q,[["__scopeId","data-v-655a23f7"]]);export{Q as default};
