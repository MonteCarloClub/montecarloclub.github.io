import{a as M,d as w,r as v,o as L,b as f,c as _,e as B,p as j,f as H,g as x,h as re,n as z,u as y,i as q,F as A,j as ie,s as K,k as ce,l as P,w as J,m as $,q as Q,t as le,v as ue,x as de,y as he,A as pe,z as fe,B as ve}from"./vendor.21a53a0c.js";const _e=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}};_e();const R={bankImageSize:64,blockSize:10,blockGap:2,blockNumPerRow:5},U={dataBlockSize:20},V={signalSpeed:5,signalSize:5,signalColor:"hsl(6, 0%, 54%)"};function me(e,t){M({targets:e,width:80,height:80,borderRadius:["0%","50%"],easing:"easeInOutSine",complete:t})}function ye(e,t,o){M({targets:e,width:t,height:t,backgroundColor:"#000",borderRadius:["0%"],complete:o})}function X(e,t,o){M({targets:e,left:t.x,top:t.y,easing:"easeInOutExpo",complete:o})}function Y(e,t){M({targets:e,opacity:0,complete:t})}function ge(e,t){M({targets:e,width:400,complete:t})}var N=(e,t)=>{const o=e.__vccOpts||e;for(const[a,s]of t)o[a]=s;return o};const be=e=>(j("data-v-521c1567"),e=e(),H(),e),ke={key:0},xe=be(()=>x("div",{class:"header"},[x("div",{class:"header-title"}," \u5B66\u4E60\u6210\u679C ")],-1)),Se=[xe],we=w({emits:["formFilled","shrinked"],setup(e,{expose:t,emit:o}){const a=v(null),s=v(!1),n=()=>{s.value=!0,a.value&&ge(a.value,()=>{h()})},r=()=>{o("formFilled")},h=()=>{a.value&&me(a.value,()=>{r()})};return L(()=>{n()}),t({transformToData:()=>{s.value=!1,a.value&&ye(a.value,U.dataBlockSize,()=>{a.value&&Y(a.value),o("shrinked")})}}),(p,d)=>(f(),_("div",{class:"input-form",ref_key:"refData",ref:a},[s.value?(f(),_("div",ke,Se)):B("",!0)],512))}});var ze=N(we,[["__scopeId","data-v-521c1567"]]);function Ne(e,t){const o=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),a=(t.x-e.x)/o,s=(t.y-e.y)/o;return{dis:o,dir:{x:a,y:s}}}function Fe(e,t,o){const a=e.width,s=e.height,n=e.getContext("2d");if(!n)return null;var r={count:t.length*2,spawnChance:.3,sparkChance:.1,sparkDist:10,sparkSize:2,speed:o.speed,neonSize:o.neonSize,repaintAlpha:.9,shadowToTimePropMult:6,color:o.color};function h(){const i=Math.round(Math.random()*(t.length-1)),u=t[i],c=u.neighbors,m=Math.round(Math.random()*(c.length-1)),b=t[c[m]],{dis:F,dir:T}=Ne(u,b);return{from:u,dis:F,dir:T}}let l=[];const p=function(){this.reset()};p.prototype.reset=function(){const{from:i,dis:u,dir:c}=h();this.distance=u,this.x=i.x,this.y=i.y,this.vx=r.speed*c.x,this.vy=r.speed*c.y,this.process=0,this.color=r.color},p.prototype.step=function(){const i=this.process/this.distance;i>.99&&this.reset();const u=this.vx*(2-i),c=this.vy*(2-i);if(this.process+=Math.sqrt(u*u+c*c),this.x+=u,this.y+=c,n.shadowBlur=i*r.shadowToTimePropMult,n.fillStyle=n.shadowColor=this.color,n.fillRect(this.x,this.y,r.neonSize,r.neonSize),Math.random()<r.sparkChance){const m=this.x+Math.random()*r.sparkDist*(Math.random()<.5?1:-1)-r.sparkSize/2,b=this.y+Math.random()*r.sparkDist*(Math.random()<.5?1:-1)-r.sparkSize/2;n.fillRect(m,b,r.sparkSize,r.sparkSize)}};function d(){if(!!n){requestAnimationFrame(d);for(var i=n.getImageData(0,0,a,s).data,u=n.createImageData(a,s),c=0;c<u.data.length;c+=4){u.data[c+0]=i[c+0],u.data[c+1]=i[c+1],u.data[c+2]=i[c+2];let m=i[c+3]*r.repaintAlpha;u.data[c+3]=m>20?m:0}n.putImageData(u,0,0),l.length<r.count&&Math.random()<r.spawnChance&&l.push(new p),l.map(function(m){m.step()})}}return{init:function(){requestAnimationFrame(d)}}}const Ie=w({props:{width:{type:Number,default:800},height:{type:Number,default:500},nodes:{type:Array,default:null}},setup(e){const t=e,o=re(()=>({width:t.width,height:t.height})),a=v(null);return L(()=>{const s=a.value;if(s){s.width=t.width,s.height=t.height;var n=Fe(s,t.nodes,{speed:V.signalSpeed,neonSize:V.signalSize,color:V.signalColor});n==null||n.init()}}),(s,n)=>(f(),_("canvas",{ref_key:"canvasEl",ref:a,class:"path-canvas",style:z(y(o))},null,4))}});var Me=N(Ie,[["__scopeId","data-v-578a9ead"]]);const Be=w({props:{startIndex:{type:Number,default:-1},nodes:{type:Array,default:null},blockSize:{type:Number,default:U.dataBlockSize},blockColor:{type:String,default:"#000"}},emits:["arrived","finished"],setup(e,{expose:t,emit:o}){const a=e,s=v([]),n=[],r=l=>{n[l]=!0;for(const p of a.nodes[l].neighbors)n[p]||(n[p]=!0,h(a.nodes[l],p))};function h(l,p){const d=s.value[p];d.style.left=l.x+"px",d.style.top=l.y+"px",d.style.opacity="1";const i=a.nodes[p];X(d,{x:i.x,y:i.y},()=>{Y(d),o("arrived",p),r(p)})}return t({broadcastFrom:l=>{h(a.nodes[l],l)}}),(l,p)=>(f(!0),_(A,null,q(e.nodes,(d,i)=>(f(),_("div",{ref_for:!0,ref:u=>{s.value[i]=u},class:"node",style:z({opacity:0,width:e.blockSize+"px",height:e.blockSize+"px",backgroundColor:e.blockColor})},null,4))),256))}});var Ce=N(Be,[["__scopeId","data-v-a6ff7abc"]]),De="/bank/assets/bank.dea6af03.svg";const Ae=e=>(j("data-v-cb38ca58"),e=e(),H(),e),Pe=Ae(()=>x("img",{src:De,alt:"\u5B66\u5206\u94F6\u884C"},null,-1)),$e={props:{startIndex:{type:Number,default:-1},bankSize:{type:Number,default:R.bankImageSize},blockSize:{type:Number,default:R.blockSize},blockGap:{type:Number,default:R.blockGap},blockNumPerRow:{type:Number,default:R.blockNumPerRow}},setup(e,{expose:t}){let o=v([]);return t({addBlock:s=>{o.value.push(s)}}),(s,n)=>(f(),_("div",{style:z({width:e.bankSize})},[Pe,x("div",{class:"blocks",style:z({gap:e.blockGap+"px",width:e.blockNumPerRow*e.blockSize+(e.blockNumPerRow-1)*e.blockGap+"px"})},[(f(!0),_(A,null,q(y(o),r=>(f(),_("div",{style:z({width:e.blockSize+"px",height:e.blockSize+"px",backgroundColor:r})},null,4))),256))],4)],4))}};var Re=N($e,[["__scopeId","data-v-cb38ca58"]]);const Ee=2,Z=ie({id:"animate",state:()=>({isStep:!0,mode:0,isStepFinished:!0,isNext:!1}),actions:{changeMode(){this.mode=(this.mode+1)%Ee,this.mode===0?this.isStep=!0:this.isStep=!1},nextStep(){this.isStepFinished=!1,this.isNext=!0},finishedStep(){this.isNext=!1,this.isStepFinished=!0}}});const Te={class:"center"},Oe=Q("\u4E0B\u4E00\u6B65"),Le=w({setup(e){const t=Z(),o=["\u5355\u6B65","\u5FAA\u73AF"],{isStep:a,mode:s,isStepFinished:n,isNext:r}=K(t),h=()=>{t.changeMode()},l=()=>{t.nextStep()};return(p,d)=>{const i=ce("a-button");return f(),_("div",Te,[P(i,{type:"primary",ghost:"",onClick:h},{default:J(()=>[Q(le(o[y(s)]),1)]),_:1}),y(a)?(f(),$(i,{key:0,type:"primary",ghost:"",disabled:!y(n),onClick:l},{default:J(()=>[Oe]),_:1},8,["disabled"])):B("",!0)])}}});var qe=N(Le,[["__scopeId","data-v-a81b92fa"]]);const C=[{x:31,y:20,neighbors:[2,3]},{x:82,y:19,neighbors:[3,5]},{x:21,y:56,neighbors:[4]},{x:60,y:48,neighbors:[0,1,2]},{x:50,y:84,neighbors:[2,3,5]},{x:84,y:62,neighbors:[4]},{x:8,y:28,neighbors:[0,2]},{x:13,y:80,neighbors:[4,2]},{x:53,y:10,neighbors:[0,1]}];function Ve(e,t){for(let o=0;o<C.length;o++){const a=C[o];a.x=Math.round(a.x/100*e),a.y=Math.round(a.y/100*t),a.neighbors.forEach(s=>{C[s].neighbors.includes(o)||C[s].neighbors.push(o)})}return C}const Ge={class:"fullscreen"},We={class:"switch"},je=w({setup(e){const t=Z(),{isStep:o,mode:a,isStepFinished:s,isNext:n}=K(t),r=v(null);let h=v([]),l=v(0),p=v(0);L(()=>{var S;const g=(S=r.value)==null?void 0:S.getClientRects();if(g&&(g==null?void 0:g.length)>0){const{width:k,height:D}=g[0];h.value=Ve(k,D),p.value=D,l.value=k}});let d=0;ue(()=>n.value,()=>{n.value===!0&&(d===0?u():d===1&&G())});const i=v(!1),u=()=>{i.value=!0},c=v(null),m=v(null),b=v(-1),F=v(!1),T=()=>{b.value=Math.round(Math.random()*(h.value.length-1));const g=h.value[b.value],{x:S,y:k}=g;c.value&&X(c.value,{x:S,y:k},()=>{m.value&&(m.value.transformToData(),F.value=!0)})},I=v(null),G=()=>{d===0&&(d=1,t.finishedStep()),(I.value&&!o.value||I.value&&o.value&&n.value)&&(d=2,I.value.broadcastFrom(b.value),i.value=!1)},W=v([]);let O=0;const ae=g=>{W.value[g].addBlock("#000"),O+=1,O===h.value.length&&(O=0,oe())},oe=()=>{t.finishedStep(),F.value=!1,d=0,o.value||u()};return(g,S)=>(f(),_(A,null,[x("div",{ref_key:"refWindow",ref:r,class:"fullscreen"},[y(l)>0?(f(),$(Me,{key:0,width:y(l),height:y(p),nodes:y(h)},null,8,["width","height","nodes"])):B("",!0),F.value?(f(),$(Ce,{key:1,ref_key:"refBroadcast",ref:I,nodes:y(h),startIndex:b.value,onArrived:ae},null,8,["nodes","startIndex"])):B("",!0),(f(!0),_(A,null,q(y(h),(k,D)=>(f(),_("div",{class:"node",style:z({left:k.x+"px",top:k.y+"px"})},[P(Re,{ref_for:!0,ref:ne=>{W.value[D]=ne}},null,512)],4))),256))],512),x("div",Ge,[i.value?(f(),_("div",{key:0,ref_key:"refDataSource",ref:c,class:"data-source"},[P(ze,{onFormFilled:T,onShrinked:G,ref_key:"refDataSourceForm",ref:m},null,512)],512)):B("",!0)]),x("div",We,[P(qe)])],64))}});var ee=N(je,[["__scopeId","data-v-4878ade8"]]),He=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ee});const Ke=w({setup(e){return(t,o)=>(f(),$(ee))}}),Je="modulepreload",te={},Qe="/bank/",Ue=function(t,o){return!o||o.length===0?t():Promise.all(o.map(a=>{if(a=`${Qe}${a}`,a in te)return;te[a]=!0;const s=a.endsWith(".css"),n=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${n}`))return;const r=document.createElement("link");if(r.rel=s?"stylesheet":Je,s||(r.as="script",r.crossOrigin=""),r.href=a,document.head.appendChild(r),s)return new Promise((h,l)=>{r.addEventListener("load",h),r.addEventListener("error",l)})})).then(()=>t())},se=de({history:he(),routes:[{path:"/",component:()=>Ue(()=>Promise.resolve().then(function(){return He}),void 0)}]});function Xe(e){e.use(se)}function Ye(e){e.use(pe)}const Ze=fe();function et(e){e.use(Ze)}const E=ve(Ke);Xe(E);Ye(E);et(E);se.isReady().then(()=>{E.mount("#app")});
