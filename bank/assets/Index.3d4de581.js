import{c as z,g as O,S as T,m as $,a as q,B as G,I as B,b as J,d as x,f as K,R as M}from"./Blockchain.30a039c9.js";import{_ as Q}from"./index.a0789f77.js";import{d as U,r as p,s as W,o as g,b as E,e as f,f as d,l as c,v as P,F as V,i as X}from"./vendor.45ad1cdd.js";const Y={class:"footer"},Z={class:"fullscene"},j={class:"fullscene"},ee={class:"fullscene"},te=U({setup(le){const H=[{x:15,y:50,role:"block",title:"\u533A\u5757"},{x:50,y:50,role:"block",title:"\u533A\u5757"},{x:85,y:50,role:"block",title:"\u533A\u5757"},{x:85,y:90,role:"user",title:"\u5B66\u4E60\u8005"},{x:50,y:90,role:"institution",title:"\u53D1\u8BC1\u673A\u6784"},{x:50,y:10,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"}],C=p(null),F=p(null),{nodes:i,screenWidth:w,screenHeight:A,scaleRate:D}=z(F,C,H);W(D,()=>{const r=C.value;r.style.transform=`scale(${D.value})`});const h=p(null),a=p(null),v=p(null),y=p([]),m=1,R=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((r,n)=>{const t=i.value.filter(o=>o.role==="bank");t.length===0&&n(1);const e=t[0],u=h.value;u.style.left=e.x+"px",u.style.top=e.y+"px",u.style.opacity="1";const s=i.value.filter(o=>o.role==="block");s.length===0&&n(1);const l=s[0];h.value&&x(h.value,{x:l.x,y:l.y-64},()=>{y.value[0]=[{x:e.x-32,y:e.y},{x:l.x,y:e.y},{x:l.x,y:l.y-112}],r(1)})})},{title:"\u5B66\u4E60\u8005\u6388\u6743\u673A\u6784\u516C\u5F00\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((r,n)=>{const t=i.value.filter(o=>o.role==="user");t.length===0&&n(1);const e=t[0],u=a.value;u.style.left=e.x+"px",u.style.top=e.y+"px",u.style.opacity="1";const s=i.value.filter(o=>o.role==="institution");s.length===0&&n(1);const l=s[0];a.value&&x(a.value,{x:l.x,y:l.y-64},()=>{y.value[1]=[{x:e.x-32,y:e.y},{x:l.x+48,y:l.y}],r(1)})})},{title:"\u673A\u6784\u9A8C\u8BC1\u540E\u516C\u5F00\u5B66\u4E60\u6210\u679C\u4E0A\u94FE",handler:()=>new Promise((r,n)=>{const t=a.value,e=v.value;e.style.left=t.style.left,e.style.top=t.style.top,e.style.opacity="1";const u=i.value.filter(k=>k.role==="block");u.length===0&&n(1);const s=u[1];let l=0;const o=()=>{l+=1,l===2&&r(1)};v.value&&x(v.value,{x:s.x,y:s.y-64},()=>{y.value[2]=[{x:parseInt(t.style.left),y:parseInt(t.style.top)},{x:s.x,y:s.y+64}],o()}),a.value&&K(a.value,o)})},{title:"\u5B66\u4E60\u8005\u516C\u5F00\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((r,n)=>{const t=i.value.filter(o=>o.role==="user");t.length===0&&n(1);const e=t[0],u=a.value;u.style.left=e.x+"px",u.style.top=e.y+"px",u.style.opacity="1";const s=i.value.filter(o=>o.role==="block");s.length===0&&n(1);const l=s[2];a.value&&x(a.value,{x:l.x,y:l.y-64},()=>{y.value[3]=[{x:e.x,y:e.y-32},{x:l.x,y:l.y+64}],r(1)})})},{title:"\u7ECF\u8FC7\u667A\u80FD\u5408\u7EA6\u9A8C\u8BC1\u540E\u5BFC\u5165\u5B66\u5206\u94F6\u884C",handler:()=>new Promise((r,n)=>{const t=i.value.filter(_=>_.role==="bank");t.length===0&&n(1);const e=t[0],u=h.value,s=parseInt(u.style.left),l=parseInt(u.style.top);let o=0;const k=()=>{o+=1,o===2&&a.value&&x(a.value,{x:e.x-64,y:e.y},()=>{const _=i.value.filter(N=>N.role==="block");_.length===0&&n(1);const b=_[2];y.value[4]=[{x:b.x,y:b.y-64},{x:b.x,y:e.y},{x:e.x+32,y:e.y}],r(1)})};a.value&&x(a.value,{x:s+128+64,y:l},k),v.value&&x(v.value,{x:s+96,y:l},k)})},{title:"\u4ECE\u5B66\u5206\u94F6\u884C\u4E2D\u8BBF\u95EE\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((r,n)=>{const t=i.value.filter(u=>u.role==="user");t.length===0&&n(1);const e=t[0];a.value&&x(a.value,{x:e.x,y:e.y-64},()=>{const u=i.value.filter(l=>l.role==="bank");u.length===0&&n(1);const s=u[0];y.value[5]=[{x:s.x,y:s.y-32},{x:s.x,y:s.y-64},{x:e.x+64,y:s.y-64},{x:e.x+64,y:e.y},{x:e.x+32,y:e.y}],r(1)})})}],{running:L,currentStep:I}=O(R,m);let S=!0;return W(I,r=>{if(S){S=!1;return}r===m&&(y.value=y.value.slice(0,m))}),(r,n)=>(g(),E(V,null,[f("div",Y,[d(T,{current:c(I),steps:R,disabled:c(L)},null,8,["current","disabled"])]),f("div",{ref_key:"refDynamicWindow",ref:F,class:"scene-container"},[f("div",{class:"scene",ref_key:"refWindow",ref:C,style:P({minWidth:c($)+"px",minHeight:c(q)+"px"})},[f("div",Z,[(g(!0),E(V,null,X(c(i),(t,e)=>(g(),E("div",{class:"node",style:P({left:t.x+"px",top:t.y+"px"})},[d(M,{role:t.role,title:t.title},null,8,["role","title"])],4))),256)),d(G,{nodes:c(i),width:c(w),height:c(A)},null,8,["nodes","width","height"])]),f("div",j,[f("div",{ref_key:"refSmartContract",ref:h,style:{opacity:0},class:"node"},[d(B,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),f("div",{ref_key:"refLearningRecords",ref:a,style:{opacity:0},class:"node"},[d(B,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),f("div",{ref_key:"refVerifyRecords",ref:v,style:{opacity:0},class:"node"},[d(B,{type:"credential",title:"\u5B66\u4E60\u6210\u679C\u8BC1\u660E"})],512)]),f("div",ee,[d(J,{pathes:y.value,width:c(w),height:c(A)},null,8,["pathes","width","height"])])],4)],512)],64))}});var oe=Q(te,[["__scopeId","data-v-7274bfae"]]);export{oe as default};
