import{c as J,g as K,S as M,B as Q,I as x,a as U,m,f as A,e as X,b as E,R as Y}from"./Blockchain.16d3c2b7.js";import{_ as Z,m as $,a as j,b as ee}from"./index.b5b4507d.js";import{d as te,r as c,v as ue,o as w,b as S,e as a,f as y,u as f,n as R,F as N,j as le,q as se,s as ne}from"./vendor.be07e58e.js";const ae=k=>(se("data-v-42c76ad1"),k=k(),ne(),k),oe={class:"fullscene"},re={class:"fullscene"},ie=ae(()=>a("div",{style:{margin:"-32px auto"}}," \u53D1\u8D77\u8F6C\u6362\u7533\u8BF7 ",-1)),ce=[ie],ye={class:"fullscene"},fe=te({setup(k){const q=[{x:10,y:48,role:"block",title:"\u533A\u5757"},{x:35,y:48,role:"block",title:"\u533A\u5757"},{x:60,y:48,role:"block",title:"\u533A\u5757"},{x:85,y:48,role:"block",title:"\u533A\u5757"},{x:10,y:86,role:"institution",title:"\u4E0A\u6D77\u5E02\u6559\u80B2\u673A\u6784"},{x:85,y:86,role:"institution",title:"\u6D59\u6C5F\u7701\u6559\u80B2\u673A\u6784"},{x:35,y:10,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"},{x:85,y:10,role:"user",title:"\u5B66\u4E60\u8005"}],W=c(null),I=c(null),{nodes:i,screenWidth:D,screenHeight:T}=J(I,W,q),B=c(null),v=c(null),p=c(null),F=c(null),C=c(null),h=c(null),_=c(null),b=c(null),d=c([]),L=1,O=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u5B66\u5206\u8F6C\u6362\u7684\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((o,n)=>{const u=i.value.filter(r=>r.role==="bank");u.length===0&&n(1);const e=u[0],s=C.value;s.style.left=e.x+"px",s.style.top=e.y+"px",s.style.opacity="1";const l=i.value.filter(r=>r.role==="block");l.length===0&&n(1);const t=l[1];C.value&&m(C.value,{x:t.x,y:t.y-64},()=>{d.value[0]=[{x:e.x,y:e.y+64},{x:t.x,y:t.y-112}],o(1)})})},{title:"\u4E0A\u6D77\u5E02\u6559\u80B2\u673A\u6784\u5C06\u5B66\u4E60\u6210\u679C\u4E0A\u94FE",handler:()=>new Promise((o,n)=>{B.value&&A(B.value);const u=i.value.filter(r=>r.role==="institution");u.length===0&&n(1);const e=u[0],s=_.value;s.style.left=e.x+"px",s.style.top=e.y+"px",s.style.opacity="1";const l=i.value.filter(r=>r.role==="block");l.length===0&&n(1);const t=l[0];_.value&&m(_.value,{x:t.x,y:t.y-64},()=>{d.value[1]=[{x:e.x,y:e.y-64},{x:t.x,y:t.y+64}],o(1)})})},{title:"\u5B66\u4E60\u8005\u53D1\u8D77\u8F6C\u6362\u7533\u8BF7",handler:()=>new Promise((o,n)=>{const u=i.value.filter(r=>r.role==="bank");u.length===0&&n(1);const e=u[0],s=i.value.filter(r=>r.role==="user");s.length===0&&n(1);const l=s[0],t=v.value;t.style.right=D.value-l.x+64+"px",t.style.top=l.y+"px",t.style.opacity="1",v.value&&X(v.value,{x:e.x+64},()=>{v.value&&A(v.value,()=>o(1)),d.value[2]=[{x:l.x-64,y:l.y},{x:e.x+64,y:e.y}]})})},{title:"\u5B66\u4E60\u8005\u83B7\u53D6\u94FE\u4E0B\u5B66\u4E60\u8BB0\u5F55",handler:()=>new Promise((o,n)=>{const u=i.value.filter(l=>l.role==="user");u.length===0&&n(1);const e=u[0],s=p.value;s.style.left=e.x+"px",s.style.top=e.y+128+"px",d.value[3]=[{x:e.x,y:e.y+64},{x:e.x,y:e.y+128}],p.value&&E(p.value,()=>o(1))})},{title:"\u5B66\u4E60\u8005\u901A\u8FC7\u9884\u8A00\u673A\u5C06\u94FE\u4E0B\u6570\u636E\u53D1\u9001\u4E0A\u94FE",handler:()=>new Promise((o,n)=>{const u=i.value.filter(t=>t.role==="block");u.length===0&&n(1);const e=u[2],s=i.value.filter(t=>t.role==="user");s.length===0&&n(1);const l=s[0];p.value&&m(p.value,{x:e.x,y:e.y-64},()=>{const t=B.value;t.style.left=e.x+"px",t.style.top=l.y+128+"px",t.style.opacity="1",d.value[4]=[{x:l.x,y:l.y+128},{x:e.x,y:l.y+128},{x:e.x,y:e.y-64}],o(1)})})},{title:"\u6D59\u6C5F\u7701\u6559\u80B2\u673A\u6784\u9A8C\u8BC1\u5B66\u4E60\u6210\u679C\u5E76\u5B8C\u6210\u8F6C\u6362",handler:()=>new Promise((o,n)=>{const u=i.value.filter(g=>g.role==="institution");u.length===0&&n(1);const e=u[1],s=h.value;s.style.left=e.x-32+"px",s.style.top=e.y-64+"px";const l=b.value;l.style.left=e.x+76+"px",l.style.top=e.y-64+"px";const t=F.value;t.style.left=e.x-32+"px",t.style.top=e.y-64+"px";const r=i.value.filter(g=>g.role==="block");r.length===0&&n(1);const H=r[3];_.value&&m(_.value,{x:e.x-112,y:e.y-64},()=>{h.value&&E(h.value,()=>{h.value&&A(h.value,()=>{F.value&&E(F.value,()=>{b.value&&E(b.value,()=>{p.value.style.opacity="0",v.value.style.opacity="0",F.value.style.opacity="0",d.value[5]=[{x:e.x,y:e.y-32},{x:H.x,y:H.y+64}],setTimeout(()=>{l.style.opacity="0",o(1)},2e3)})})})})})})}],{running:z,currentStep:P}=K(O,1);let V=!0;ue(P,o=>{if(V){V=!1;return}o===L&&(d.value=d.value.slice(0,L))});const G=c(window.innerWidth);return(o,n)=>(w(),S(N,null,[a("div",{class:"footer",style:R({flex:G.value>f($)?"none":"1"})},[y(M,{current:f(P),steps:O,disabled:f(z)},null,8,["current","disabled"])],4),a("div",{ref_key:"refDynamicWindow",ref:I,class:"scene-container"},[a("div",{class:"scene",ref_key:"refWindow",ref:W,style:R({minWidth:f(j)+"px",minHeight:f(ee)+"px"})},[a("div",oe,[(w(!0),S(N,null,le(f(i),(u,e)=>(w(),S("div",{class:"node",style:R({left:u.x+"px",top:u.y+"px"})},[y(Y,{role:u.role,title:u.title},null,8,["role","title"])],4))),256)),y(Q,{nodes:f(i),width:f(D),height:f(T)},null,8,["nodes","width","height"])]),a("div",re,[a("div",{ref_key:"refSmartContract",ref:C,style:{opacity:0},class:"node"},[y(x,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),a("div",{ref_key:"refLearningRecords",ref:_,style:{opacity:0},class:"node"},[y(x,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),a("div",{ref_key:"refTransferData",ref:F,style:{opacity:0},class:"node"},[y(x,{type:"transfer",title:"\u8F6C\u6362\u673A\u5236"})],512),a("div",{ref_key:"refOffChainData",ref:p,style:{opacity:0},class:"node"},[y(x,{type:"offChain",title:"\u94FE\u4E0B\u6570\u636E"})],512),a("div",{ref_key:"refVerifyRecords",ref:h,style:{opacity:0},class:"node"},[y(x,{type:"verified",title:"\u9A8C\u8BC1\u6210\u529F"})],512),a("div",{ref_key:"refTransferedLearningRecords",ref:b,style:{opacity:0},class:"node"},[y(x,{type:"transferred",title:"\u8F6C\u6362\u540E\u7684\u5B66\u4E60\u6210\u679C"})],512),a("div",{ref_key:"refOracle",ref:B,style:{opacity:0},class:"node"},[y(x,{type:"oracle",title:"\u9884\u8A00\u673A\uFF08Oracle\uFF09"})],512),a("div",{class:"line",ref_key:"refApplyArrow",ref:v,style:{opacity:0}},ce,512)]),a("div",ye,[y(U,{pathes:d.value,width:f(D),height:f(T)},null,8,["pathes","width","height"])])],4)],512)],64))}});var xe=Z(fe,[["__scopeId","data-v-42c76ad1"]]);export{xe as default};
