import{m as c,n as w,q as A,o as _,c as p,k as y,j as C,p as F,t as I,s as N,F as S,d as M,a as f,i as g,u as E,r as k,h as P,v as T,l as b,w as $}from"./vendor.ee8587b0.js";import{_ as x}from"./index.49e488a8.js";import{s as z}from"./scenarios.f05ef6a2.js";function ue(e,n){const a=c(0),t=c(!1),s=c(!0),o=()=>{t.value=!0,a.value===e.length&&(a.value=n),e[a.value].handler().then(()=>{a.value+=1,t.value=!1,s.value&&o()})};return{auto:s,running:t,currentStep:a,nextStep:o,toggleAuto:()=>{s.value=!s.value,s.value&&o()}}}var R="/bank/assets/bank.4c65892f.svg",j="/bank/assets/user.d6002a18.svg",D="/bank/assets/block.a6672ab0.svg",V="/bank/assets/institution.53347f4f.svg";const W={bank:R,user:j,block:D,institution:V};function L(e,n,a){for(let t=0;t<e.length;t++){const s=e[t];s.x=Math.round(s.x/100*n),s.y=Math.round(s.y/100*a)}return e}function ie(e,n){let a=c(0),t=c(0),s=c([]);return w(()=>{var l;const o=(l=e.value)==null?void 0:l.getClientRects();if(o&&(o==null?void 0:o.length)>0){const{width:r,height:u}=o[0];s.value=L(n,r,u),t.value=u,a.value=r}}),{screenWidth:a,screenHeight:t,nodes:s}}const q={roleImageSize:64},ce={size:32};const H=["src","alt"],O={key:0,class:"title"},U={props:{roleSize:{type:Number,default:q.roleImageSize},title:{type:String,default:""},role:{type:String,default:"black"}},setup(e){const n=e,a=A(()=>W[n.role]);return(t,s)=>(_(),p(S,null,[y("div",{class:"role",style:F({width:e.roleSize})},[y("img",{src:C(a),alt:e.title},null,8,H)],4),e.title?(_(),p("div",O,I(e.title),1)):N("",!0)],64))}};var de=x(U,[["__scopeId","data-v-0e3468ff"]]);const G={class:"steps"},J={key:0,class:"steps-action"},K=b(" \u5207\u6362\u81F3\u5355\u6B65\u6A21\u5F0F "),Q={key:1,class:"steps-action"},X=b(" \u4E0B\u4E00\u6B65 "),Y=b(" \u5207\u6362\u81F3\u5FAA\u73AF\u6A21\u5F0F "),Z={class:"fixed-panel"},ee=b(" \u67E5\u770B\u6D41\u7A0B\u56FE "),te=["src"],se=M({props:{current:{type:Number,default:0},steps:{type:Array,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1}},emits:["nextstep","toggle"],setup(e,{emit:n}){const a=E(),t=c(!1),s=c(""),o=c(""),l=()=>{t.value=!1},r=()=>{if(t.value=!0,a.name){const u=z[a.name];s.value=u.image,o.value=u.title}};return(u,i)=>{const d=k("a-step"),v=k("a-steps"),m=k("a-button"),B=k("a-modal");return _(),p("div",G,[f(v,{current:e.current},{default:g(()=>[(_(!0),p(S,null,P(e.steps,h=>(_(),T(d,{key:h.title,title:h.title},null,8,["title"]))),128))]),_:1},8,["current"]),e.auto?(_(),p("div",J,[f(m,{type:"primary",onClick:i[0]||(i[0]=h=>n("toggle"))},{default:g(()=>[K]),_:1})])):(_(),p("div",Q,[f(m,{type:"primary",onClick:i[1]||(i[1]=h=>n("nextstep")),disabled:e.disabled},{default:g(()=>[X]),_:1},8,["disabled"]),f(m,{type:"primary",onClick:i[2]||(i[2]=h=>n("toggle"))},{default:g(()=>[Y]),_:1})])),y("div",Z,[f(m,{onClick:r},{default:g(()=>[ee]),_:1})]),f(B,{visible:t.value,"onUpdate:visible":i[3]||(i[3]=h=>t.value=h),title:o.value,"ok-text":"\u786E\u8BA4","cancel-text":"\u53D6\u6D88",onOk:l,width:"1000px"},{default:g(()=>[y("img",{alt:"example",class:"image",src:s.value},null,8,te)]),_:1},8,["visible","title"])])}}});var ve=x(se,[["__scopeId","data-v-12928f6c"]]);function ae(e,n,a){const t=10,s=3,o="black",l=Math.atan2(a.y-n.y,a.x-n.x),r=36,u=n.x+r,i=n.y,d=a.x-r,v=a.y;e.save(),e.strokeStyle=o,e.beginPath(),e.moveTo(u,i),e.lineTo(d,v),e.lineWidth=s,e.stroke(),e.beginPath(),e.moveTo(d,v),e.lineTo(d-t*Math.cos(l-Math.PI/7),v-t*Math.sin(l-Math.PI/7)),e.lineTo(d-t*Math.cos(l+Math.PI/7),v-t*Math.sin(l+Math.PI/7)),e.lineTo(d,v),e.lineTo(d-t*Math.cos(l-Math.PI/7),v-t*Math.sin(l-Math.PI/7)),e.stroke(),e.restore()}const ne=M({props:{width:{type:Number,default:800},height:{type:Number,default:500},nodes:{type:Array,default:null}},setup(e){const n=e,a=c(null);$(()=>n.nodes.length,()=>{t()});const t=()=>{const s=a.value;if(!s)return;s.width=n.width,s.height=n.height;const o=s.getContext("2d"),l=n.nodes.filter(r=>r.role==="block");if(l.sort((r,u)=>r.x-u.x),!(l.length<2))for(let r=0;r<l.length-1;r++)o&&ae(o,l[r],l[r+1])};return(s,o)=>(_(),p("canvas",{ref_key:"canvasEl",ref:a,class:"path-canvas"},null,512))}});var _e=x(ne,[["__scopeId","data-v-61b8a914"]]);export{_e as B,de as R,ve as S,ie as c,ue as g,ce as s};
