import{_ as j,m as q,a as G,b as J}from"./index.f9825346.js";import{c as K,g as M,S as Q,B as U,I as k,a as X,m as p,f as F,R as Y}from"./Blockchain.c0ae3341.js";import{d as Z,r as d,v as $,o as g,b as A,e as y,f as v,u as c,n as w,F as L,j as ee}from"./vendor.be07e58e.js";const te={class:"fullscene"},ue={class:"fullscene"},le={class:"fullscene"},se=Z({setup(ne){const N=[{x:15,y:48,role:"block",title:"\u533A\u5757"},{x:50,y:48,role:"block",title:"\u533A\u5757"},{x:85,y:48,role:"block",title:"\u533A\u5757"},{x:85,y:86,role:"user",title:"\u5B66\u4E60\u8005"},{x:50,y:86,role:"institution",title:"\u53D1\u8BC1\u673A\u6784"},{x:50,y:10,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"}],D=d(null),R=d(null),{nodes:a,screenWidth:W,screenHeight:I}=K(R,D,N),h=d(null),x=d(null),o=d(null),C=d(null),f=d([]),_=1,S=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((r,n)=>{const t=a.value.filter(i=>i.role==="bank");t.length===0&&n(1);const e=t[0],u=h.value;u.style.left=e.x+"px",u.style.top=e.y+"px",u.style.opacity="1";const l=a.value.filter(i=>i.role==="block");l.length===0&&n(1);const s=l[0];h.value&&p(h.value,{x:s.x,y:s.y-64},()=>{f.value[0]=[{x:e.x-32,y:e.y},{x:s.x,y:e.y},{x:s.x,y:s.y-112}],r(1)})})},{title:"\u5B66\u4E60\u8005\u6388\u6743\u673A\u6784\u516C\u5F00\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((r,n)=>{C.value&&F(C.value),o.value&&F(o.value);const t=a.value.filter(i=>i.role==="user");t.length===0&&n(1);const e=t[0],u=x.value;u.style.left=e.x+"px",u.style.top=e.y+"px",u.style.opacity="1";const l=a.value.filter(i=>i.role==="institution");l.length===0&&n(1);const s=l[0];x.value&&p(x.value,{x:s.x,y:s.y-64},()=>{f.value[1]=[{x:e.x-32,y:e.y},{x:s.x+48,y:s.y}],r(1)})})},{title:"\u53D1\u8BC1\u673A\u6784\u9A8C\u8BC1\u5B66\u4E60\u6210\u679C\u540E\u5C06\u5176\u4E0A\u94FE",handler:()=>new Promise((r,n)=>{const t=x.value,e=o.value;e.style.left=t.style.left,e.style.top=t.style.top,e.style.opacity="1";const u=a.value.filter(m=>m.role==="block");u.length===0&&n(1);const l=u[1];let s=0;const i=()=>{s+=1,s===2&&r(1)};o.value&&p(o.value,{x:l.x,y:l.y-64},()=>{f.value[2]=[{x:parseInt(t.style.left),y:parseInt(t.style.top)},{x:l.x,y:l.y+64}],i()}),x.value&&F(x.value,i)})},{title:"\u5B66\u4E60\u6210\u679C\u7ECF\u8FC7\u667A\u80FD\u5408\u7EA6\u9A8C\u8BC1\u540E\u88AB\u5BFC\u5165\u5B66\u5206\u94F6\u884C",handler:()=>new Promise((r,n)=>{const t=a.value.filter(B=>B.role==="bank");t.length===0&&n(1);const e=t[0],u=h.value,l=parseInt(u.style.left),s=parseInt(u.style.top);let i=0;const m=()=>{if(i+=1,i===1){const B=o.value,b=C.value;b.style.left=B.style.left,b.style.top=B.style.top,b.style.opacity="1",o.value&&p(o.value,{x:e.x-96,y:e.y},()=>{const H=a.value.filter(T=>T.role==="block");H.length===0&&n(1);const E=H[2];f.value[3]=[{x:E.x,y:E.y-64},{x:E.x,y:e.y},{x:e.x+32,y:e.y}],r(1)})}};o.value&&p(o.value,{x:l+128,y:s},m)})},{title:"\u5B66\u4E60\u8005\u4ECE\u5B66\u5206\u94F6\u884C\u4E2D\u8BBF\u95EE\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((r,n)=>{const t=a.value.filter(u=>u.role==="user");t.length===0&&n(1);const e=t[0];o.value&&p(o.value,{x:e.x,y:e.y-64},()=>{const u=a.value.filter(s=>s.role==="bank");u.length===0&&n(1);const l=u[0];f.value[4]=[{x:l.x,y:l.y-32},{x:l.x,y:l.y-64},{x:e.x+64,y:l.y-64},{x:e.x+64,y:e.y},{x:e.x+32,y:e.y}],r(1)})})}],{running:z,currentStep:V}=M(S,_);let P=!0;$(V,r=>{if(P){P=!1;return}r===_&&(f.value=f.value.slice(0,_))});const O=d(window.innerWidth);return(r,n)=>(g(),A(L,null,[y("div",{class:"footer",style:w({flex:O.value>c(q)?"none":"1"})},[v(Q,{current:c(V),steps:S,disabled:c(z)},null,8,["current","disabled"])],4),y("div",{ref_key:"refDynamicWindow",ref:R,class:"scene-container"},[y("div",{class:"scene",ref_key:"refWindow",ref:D,style:w({minWidth:c(G)+"px",minHeight:c(J)+"px"})},[y("div",te,[(g(!0),A(L,null,ee(c(a),(t,e)=>(g(),A("div",{class:"node",style:w({left:t.x+"px",top:t.y+"px"})},[v(Y,{role:t.role,title:t.title},null,8,["role","title"])],4))),256)),v(U,{nodes:c(a),width:c(W),height:c(I)},null,8,["nodes","width","height"])]),y("div",ue,[y("div",{ref_key:"refSmartContract",ref:h,style:{opacity:0},class:"node"},[v(k,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),y("div",{ref_key:"refLearningRecords",ref:x,style:{opacity:0},class:"node"},[v(k,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),y("div",{ref_key:"refVerifiedRecords",ref:o,style:{opacity:0},class:"node"},[v(k,{type:"verified",title:"\u5B66\u4E60\u6210\u679C\u3010\u5DF2\u9A8C\u8BC1\u3011"})],512),y("div",{ref_key:"refVerifiedRecordsCopy",ref:C,style:{opacity:0},class:"node"},[v(k,{type:"verified",title:"\u5B66\u4E60\u6210\u679C\u3010\u5DF2\u9A8C\u8BC1\u3011"})],512)]),y("div",le,[v(X,{pathes:f.value,width:c(W),height:c(I)},null,8,["pathes","width","height"])])],4)],512)],64))}});var ae=j(se,[["__scopeId","data-v-18e4517b"]]);export{ae as default};
