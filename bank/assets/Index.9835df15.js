import{c as S,g as I,S as P,m as W,a as V,B as H,I as C,b as c,f as L,R as N}from"./Blockchain.c99c8b4a.js";import{_ as z}from"./index.20ef37ce.js";import{d as O,r as h,o as _,b as B,e as f,f as v,l as y,s as F,F as k,i as T}from"./vendor.2e2e4d27.js";const j={class:"footer"},q={style:{overflow:"auto",flex:"1"}},G={class:"fullscene"},J={class:"fullscene"},K=O({setup(M){const b=[{x:15,y:50,role:"block",title:"\u533A\u5757"},{x:50,y:50,role:"block",title:"\u533A\u5757"},{x:85,y:50,role:"block",title:"\u533A\u5757"},{x:85,y:90,role:"user",title:"\u5B66\u4E60\u8005"},{x:50,y:90,role:"institution",title:"\u53D1\u8BC1\u673A\u6784"},{x:50,y:10,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"}],m=h(null),{nodes:a,screenWidth:g,screenHeight:A}=S(m,b),p=h(null),s=h(null),d=h(null),E=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((i,n)=>{const e=a.value.filter(l=>l.role==="bank");e.length===0&&n(1);const t=e[0],u=p.value;u.style.left=t.x+"px",u.style.top=t.y+"px",u.style.opacity="1";const o=a.value.filter(l=>l.role==="block");o.length===0&&n(1);const r=o[0];p.value&&c(p.value,{x:r.x,y:r.y-64},()=>i(1))})},{title:"\u5B66\u4E60\u8005\u6388\u6743\u673A\u6784\u516C\u5F00\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((i,n)=>{const e=a.value.filter(l=>l.role==="user");e.length===0&&n(1);const t=e[0],u=s.value;u.style.left=t.x+"px",u.style.top=t.y+"px",u.style.opacity="1";const o=a.value.filter(l=>l.role==="institution");o.length===0&&n(1);const r=o[0];s.value&&c(s.value,{x:r.x,y:r.y-64},()=>i(1))})},{title:"\u673A\u6784\u9A8C\u8BC1\u540E\u516C\u5F00\u5B66\u4E60\u6210\u679C\u4E0A\u94FE",handler:()=>new Promise((i,n)=>{const e=s.value,t=d.value;t.style.left=e.style.left,t.style.top=e.style.top,t.style.opacity="1";const u=a.value.filter(x=>x.role==="block");u.length===0&&n(1);const o=u[1];let r=0;const l=()=>{r+=1,r===2&&i(1)};d.value&&c(d.value,{x:o.x,y:o.y-64},l),s.value&&L(s.value,l)})},{title:"\u5B66\u4E60\u8005\u516C\u5F00\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((i,n)=>{const e=a.value.filter(l=>l.role==="user");e.length===0&&n(1);const t=e[0],u=s.value;u.style.left=t.x+"px",u.style.top=t.y+"px",u.style.opacity="1";const o=a.value.filter(l=>l.role==="block");o.length===0&&n(1);const r=o[2];s.value&&c(s.value,{x:r.x,y:r.y-64},()=>i(1))})},{title:"\u7ECF\u8FC7\u667A\u80FD\u5408\u7EA6\u9A8C\u8BC1\u540E\u5BFC\u5165\u5B66\u5206\u94F6\u884C",handler:()=>new Promise((i,n)=>{const e=a.value.filter(R=>R.role==="bank");e.length===0&&n(1);const t=e[0],u=p.value,o=parseInt(u.style.left),r=parseInt(u.style.top);let l=0;const x=()=>{l+=1,l===2&&s.value&&c(s.value,{x:t.x,y:t.y-64},()=>i(1))};s.value&&c(s.value,{x:o+128+64,y:r},x),d.value&&c(d.value,{x:o+96,y:r},x)})},{title:"\u4ECE\u5B66\u5206\u94F6\u884C\u4E2D\u8BBF\u95EE\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((i,n)=>{const e=a.value.filter(u=>u.role==="user");e.length===0&&n(1);const t=e[0];s.value&&c(s.value,{x:t.x,y:t.y-64},()=>{i(1)})})}],{running:w,currentStep:D}=I(E,1);return(i,n)=>(_(),B(k,null,[f("div",j,[v(P,{current:y(D),steps:E,disabled:y(w)},null,8,["current","disabled"])]),f("div",q,[f("div",{class:"scene",ref_key:"refWindow",ref:m,style:F({minWidth:y(W)+"px",minHeight:y(V)+"px"})},[f("div",G,[(_(!0),B(k,null,T(y(a),(e,t)=>(_(),B("div",{class:"node",style:F({left:e.x+"px",top:e.y+"px"})},[v(N,{role:e.role,title:e.title},null,8,["role","title"])],4))),256)),v(H,{nodes:y(a),width:y(g),height:y(A)},null,8,["nodes","width","height"])]),f("div",J,[f("div",{ref_key:"refSmartContract",ref:p,style:{opacity:0},class:"node"},[v(C,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),f("div",{ref_key:"refLearningRecords",ref:s,style:{opacity:0},class:"node"},[v(C,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),f("div",{ref_key:"refVerifyRecords",ref:d,style:{opacity:0},class:"node"},[v(C,{type:"credential",title:"\u5B66\u4E60\u6210\u679C\u8BC1\u660E"})],512)])],4)])],64))}});var Y=z(K,[["__scopeId","data-v-503240f5"]]);export{Y as default};
