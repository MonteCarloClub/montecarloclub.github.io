import{c as V,g as N,S as z,m as O,a as T,B as q,I as b,b as G,d,f as S,R as J}from"./Blockchain.15f0478e.js";import{_ as K}from"./index.99738a91.js";import{d as M,r as _,o as E,b as F,e as c,f as v,l as f,s as L,F as H,i as Q}from"./vendor.2e2e4d27.js";const U={class:"footer"},X={style:{overflow:"auto",flex:"1"}},Y={class:"fullscene"},Z={class:"fullscene"},$={class:"fullscene"},j=M({setup(ee){const I=[{x:16,y:50,role:"block",title:"\u533A\u5757"},{x:53,y:50,role:"block",title:"\u533A\u5757"},{x:90,y:50,role:"block",title:"\u533A\u5757"},{x:16,y:10,role:"user",title:"\u5B66\u4E60\u8005"},{x:90,y:90,role:"user",title:"\u62DB\u8058\u5355\u4F4DHR"},{x:53,y:10,role:"institution",title:"\u53D1\u8BC1\u673A\u6784"},{x:16,y:90,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"}],A=_(null),{nodes:r,screenWidth:D,screenHeight:R}=V(A,I),B=_(null),p=_(null),i=_(null),k=_(null),C=_(null),g=_([]),w=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((y,n)=>{const u=r.value.filter(s=>s.role==="bank");u.length===0&&n(1);const e=u[0],l=B.value;l.style.left=e.x+"px",l.style.top=e.y-64+"px",l.style.opacity="1";const o=r.value.filter(s=>s.role==="block");o.length===0&&n(1);const t=o[0];B.value&&d(B.value,{x:t.x,y:t.y-64},()=>{g.value[0]=[{x:e.x,y:e.y-32},{x:t.x,y:t.y+64}],y(1)})})},{title:"\u5B66\u4E60\u8005\u6388\u6743\u673A\u6784\u9A8C\u8BC1\u5E76\u4E0A\u4F20\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((y,n)=>{k.value&&S(k.value);const u=r.value.filter(x=>x.role==="user");u.length===0&&n(1);const e=u[0],l=i.value;l.style.left=e.x+"px",l.style.top=e.y+"px",l.style.opacity="1";const o=r.value.filter(x=>x.role==="institution");o.length===0&&n(1);const t=o[0],s=r.value.filter(x=>x.role==="block");s.length===0&&n(1);const a=s[1];let h=0;const m=()=>{h+=1,h===2&&(g.value[1]=[{x:t.x,y:t.y+64},{x:a.x,y:a.y-64}],y(1))};i.value&&d(i.value,{x:t.x-64,y:t.y},()=>{const x=p.value;x.style.left=t.x+"px",x.style.top=t.y+"px",x.style.opacity="1",p.value&&d(p.value,{x:a.x,y:a.y-64},m),i.value&&d(i.value,{x:a.x-64,y:a.y-64},m)})})},{title:"\u53D1\u9001\u5B66\u4E60\u6210\u679C\u7684\u5730\u5740",handler:()=>new Promise((y,n)=>{const u=r.value.filter(s=>s.role==="user");u.length===0&&n(1);const e=u[0],l=C.value;l.style.left=e.x-64+"px",l.style.top=e.y+"px",l.style.opacity="1";const o=r.value.filter(s=>s.role==="bank");o.length===0&&n(1);const t=o[0];C.value&&d(C.value,{x:t.x-64,y:t.y},()=>{g.value[2]=[{x:e.x-32,y:e.y},{x:e.x-96,y:e.y},{x:e.x-96,y:t.y},{x:t.x-32,y:t.y}],y(1)})})},{title:"\u5B66\u5206\u94F6\u884C\u901A\u8FC7\u667A\u80FD\u5408\u7EA6\u9A8C\u8BC1\u5E76\u5B58\u50A8\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((y,n)=>{const u=r.value.filter(a=>a.role==="bank");u.length===0&&n(1);const e=u[0],l=r.value.filter(a=>a.role==="block");l.length===0&&n(1);let o=0;const t=()=>{o+=1,o===3&&(g.value[3]=[{x:e.x+32,y:e.y},{x:l[1].x,y:e.y},{x:l[1].x,y:l[1].y+64}],y(1))};C.value&&S(C.value,t);const s=l[0];p.value&&d(p.value,{x:s.x+64+64,y:s.y-64},t),i.value&&d(i.value,{x:s.x+64,y:s.y-64},t)})},{title:"\u62DB\u8058\u5355\u4F4DHR\u83B7\u53D6\u5B66\u4E60\u6210\u679C\u5E76\u9A8C\u8BC1",handler:()=>new Promise((y,n)=>{const u=r.value.filter(t=>t.role==="block");u.length===0&&n(1);const e=u[2];let l=0;const o=()=>{if(l+=1,l===2){const t=i.value,s=k.value;s.style.left=t.style.left,s.style.top=t.style.top,s.style.opacity="1";const a=r.value.filter(m=>m.role==="user");a.length===0&&n(1);const h=a[1];k.value&&d(k.value,{x:h.x,y:h.y-64},()=>{g.value[4]=[{x:e.x,y:e.y},{x:h.x,y:h.y-64}],y(1)})}};p.value&&d(p.value,{x:e.x+64,y:e.y-64},o),i.value&&d(i.value,{x:e.x,y:e.y-64},o)})}],{running:P,currentStep:W}=N(w,1);return(y,n)=>(E(),F(H,null,[c("div",U,[v(z,{current:f(W),steps:w,disabled:f(P)},null,8,["current","disabled"])]),c("div",X,[c("div",{class:"scene",ref_key:"refWindow",ref:A,style:L({minWidth:f(O)+"px",minHeight:f(T)+"px"})},[c("div",Y,[(E(!0),F(H,null,Q(f(r),(u,e)=>(E(),F("div",{class:"node",style:L({left:u.x+"px",top:u.y+"px"})},[v(J,{role:u.role,title:u.title},null,8,["role","title"])],4))),256)),v(q,{nodes:f(r),width:f(D),height:f(R)},null,8,["nodes","width","height"])]),c("div",Z,[c("div",{ref_key:"refSmartContract",ref:B,style:{opacity:0},class:"node"},[v(b,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),c("div",{ref_key:"refLearningRecords",ref:i,style:{opacity:0},class:"node"},[v(b,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),c("div",{ref_key:"refVerifyRecords",ref:p,style:{opacity:0},class:"node"},[v(b,{type:"credential",title:"\u6210\u679C\u8BC1\u660E"})],512),c("div",{ref_key:"refLearningRecordsCopy",ref:k,style:{opacity:0},class:"node"},[v(b,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),c("div",{ref_key:"refLearningRecordAddress",ref:C,style:{opacity:0},class:"node"},[v(b,{type:"address",title:"\u5B66\u4E60\u6210\u679C\u94FE\u4E0A\u5730\u5740"})],512)]),c("div",$,[v(G,{pathes:g.value,width:f(D),height:f(R)},null,8,["pathes","width","height"])])],4)])],64))}});var se=K(j,[["__scopeId","data-v-b19f346c"]]);export{se as default};
