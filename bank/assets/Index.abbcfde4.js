import{_ as T,m as q,a as G,b as J}from"./index.b5b4507d.js";import{c as K,g as M,S as Q,B as U,I as _,a as X,m as C,f as F,R as Y}from"./Blockchain.16d3c2b7.js";import{d as Z,r as v,v as $,o as A,b as D,e as c,f as x,u as y,n as w,F as P,j}from"./vendor.be07e58e.js";const ee={class:"fullscene"},te={class:"fullscene"},ue={class:"fullscene"},le=Z({setup(se){const N=[{x:16,y:48,role:"block",title:"\u533A\u5757"},{x:53,y:48,role:"block",title:"\u533A\u5757"},{x:90,y:48,role:"block",title:"\u533A\u5757"},{x:16,y:10,role:"user",title:"\u5B66\u4E60\u8005"},{x:90,y:86,role:"user",title:"\u62DB\u8058\u5355\u4F4DHR"},{x:53,y:10,role:"institution",title:"\u53D1\u8BC1\u673A\u6784"},{x:16,y:86,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"}],R=v(null),W=v(null),{nodes:o,screenWidth:S,screenHeight:V}=K(W,R,N),g=v(null),f=v(null),k=v(null),B=v(null),b=v(null),p=v([]),E=1,H=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((r,n)=>{const l=o.value.filter(s=>s.role==="bank");l.length===0&&n(1);const e=l[0],u=g.value;u.style.left=e.x+"px",u.style.top=e.y-64+"px",u.style.opacity="1";const i=o.value.filter(s=>s.role==="block");i.length===0&&n(1);const t=i[0];g.value&&C(g.value,{x:t.x,y:t.y-64},()=>{p.value[0]=[{x:e.x,y:e.y-32},{x:t.x,y:t.y+64}],r(1)})})},{title:"\u5B66\u4E60\u8005\u6388\u6743\u673A\u6784\u9A8C\u8BC1\u5E76\u4E0A\u4F20\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((r,n)=>{B.value&&F(B.value);const l=o.value.filter(d=>d.role==="user");l.length===0&&n(1);const e=l[0],u=k.value;u.style.left=e.x+"px",u.style.top=e.y+"px",u.style.opacity="1";const i=o.value.filter(d=>d.role==="institution");i.length===0&&n(1);const t=i[0],s=o.value.filter(d=>d.role==="block");s.length===0&&n(1);const a=s[1];let h=0;const m=()=>{h+=1,h===2&&(p.value[1]=[{x:t.x,y:t.y+64},{x:a.x,y:a.y-64}],r(1))};k.value&&C(k.value,{x:t.x-64,y:t.y},()=>{const d=f.value;d.style.left=t.x+"px",d.style.top=t.y+"px",d.style.opacity="1",f.value&&C(f.value,{x:a.x,y:a.y-64},m),k.value&&F(k.value,m)})})},{title:"\u5B66\u4E60\u8005\u5C06\u5B66\u4E60\u6210\u679C\u7684\u94FE\u4E0A\u5730\u5740\u53D1\u7ED9\u5B66\u5206\u94F6\u884C",handler:()=>new Promise((r,n)=>{const l=o.value.filter(s=>s.role==="user");l.length===0&&n(1);const e=l[0],u=b.value;u.style.left=e.x-64+"px",u.style.top=e.y+"px",u.style.opacity="1";const i=o.value.filter(s=>s.role==="bank");i.length===0&&n(1);const t=i[0];b.value&&C(b.value,{x:t.x-64,y:t.y},()=>{p.value[2]=[{x:e.x-32,y:e.y},{x:e.x-96,y:e.y},{x:e.x-96,y:t.y},{x:t.x-32,y:t.y}],r(1)})})},{title:"\u5B66\u5206\u94F6\u884C\u901A\u8FC7\u667A\u80FD\u5408\u7EA6\u9A8C\u8BC1\u5E76\u5B58\u50A8\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((r,n)=>{const l=o.value.filter(a=>a.role==="bank");l.length===0&&n(1);const e=l[0],u=o.value.filter(a=>a.role==="block");u.length===0&&n(1);let i=0;const t=()=>{i+=1,i===2&&(p.value[3]=[{x:e.x+32,y:e.y},{x:u[1].x,y:e.y},{x:u[1].x,y:u[1].y+64}],r(1))};b.value&&F(b.value,t);const s=u[0];f.value&&C(f.value,{x:s.x+64+64,y:s.y-64},t)})},{title:"\u62DB\u8058\u5355\u4F4DHR\u83B7\u53D6\u5B66\u4E60\u6210\u679C\u5E76\u9A8C\u8BC1",handler:()=>new Promise((r,n)=>{const l=o.value.filter(t=>t.role==="block");l.length===0&&n(1);const e=l[2];let u=0;const i=()=>{if(u+=1,u===1){const t=f.value,s=B.value;s.style.left=t.style.left,s.style.top=t.style.top,s.style.opacity="1";const a=o.value.filter(m=>m.role==="user");a.length===0&&n(1);const h=a[1];B.value&&C(B.value,{x:h.x,y:h.y-64},()=>{p.value[4]=[{x:e.x,y:e.y},{x:h.x,y:h.y-64}],r(1)})}};f.value&&C(f.value,{x:e.x,y:e.y-64},i)})}],{running:z,currentStep:I}=M(H,E);let L=!0;$(I,r=>{if(L){L=!1;return}r===E&&(p.value=p.value.slice(0,E))});const O=v(window.innerWidth);return(r,n)=>(A(),D(P,null,[c("div",{class:"footer",style:w({flex:O.value>y(q)?"none":"1"})},[x(Q,{current:y(I),steps:H,disabled:y(z)},null,8,["current","disabled"])],4),c("div",{ref_key:"refDynamicWindow",ref:W,class:"scene-container"},[c("div",{class:"scene",ref_key:"refWindow",ref:R,style:w({minWidth:y(G)+"px",minHeight:y(J)+"px"})},[c("div",ee,[(A(!0),D(P,null,j(y(o),(l,e)=>(A(),D("div",{class:"node",style:w({left:l.x+"px",top:l.y+"px"})},[x(Y,{role:l.role,title:l.title},null,8,["role","title"])],4))),256)),x(U,{nodes:y(o),width:y(S),height:y(V)},null,8,["nodes","width","height"])]),c("div",te,[c("div",{ref_key:"refSmartContract",ref:g,style:{opacity:0},class:"node"},[x(_,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),c("div",{ref_key:"refLearningRecords",ref:k,style:{opacity:0},class:"node"},[x(_,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),c("div",{ref_key:"refVerifyRecords",ref:f,style:{opacity:0},class:"node"},[x(_,{type:"verified",title:"\u5B66\u4E60\u6210\u679C\u3010\u5DF2\u9A8C\u8BC1\u3011"})],512),c("div",{ref_key:"refVerifiedRecordsCopy",ref:B,style:{opacity:0},class:"node"},[x(_,{type:"verified",title:"\u5B66\u4E60\u6210\u679C\u3010\u5DF2\u9A8C\u8BC1\u3011"})],512),c("div",{ref_key:"refLearningRecordAddress",ref:b,style:{opacity:0},class:"node"},[x(_,{type:"address",title:"\u5B66\u4E60\u6210\u679C\u94FE\u4E0A\u5730\u5740"})],512)]),c("div",ue,[x(X,{pathes:p.value,width:y(S),height:y(V)},null,8,["pathes","width","height"])])],4)],512)],64))}});var re=T(le,[["__scopeId","data-v-f8c64c0c"]]);export{re as default};
