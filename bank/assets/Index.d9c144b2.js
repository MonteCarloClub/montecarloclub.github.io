import{c as O,g as N,S as q,m as z,a as G,B as J,I as _,b as K,d as B,e as M,h as m,R as Q,f as L}from"./Blockchain.15f0478e.js";import{_ as U}from"./index.99738a91.js";import{d as X,r as f,o as E,b as A,e as a,f as c,l as y,s as P,F as T,i as Y,p as Z,q as $}from"./vendor.2e2e4d27.js";const j=C=>(Z("data-v-45739c57"),C=C(),$(),C),ee={class:"footer"},te={style:{overflow:"auto",flex:"1"}},le={class:"fullscene"},ue={class:"fullscene"},se=j(()=>a("div",{style:{margin:"-32px auto"}}," \u53D1\u8D77\u8F6C\u6362\u7533\u8BF7 ",-1)),oe=[se],ne={class:"fullscene"},ae=X({setup(C){const W=[{x:10,y:50,role:"block",title:"\u533A\u5757"},{x:35,y:50,role:"block",title:"\u533A\u5757"},{x:60,y:50,role:"block",title:"\u533A\u5757"},{x:85,y:50,role:"block",title:"\u533A\u5757"},{x:10,y:90,role:"institution",title:"\u4E0A\u6D77\u5E02\u6559\u80B2\u673A\u6784"},{x:85,y:90,role:"institution",title:"\u6D59\u6C5F\u7701\u6559\u80B2\u673A\u6784"},{x:35,y:10,role:"bank",title:"\u957F\u4E09\u89D2\u5B66\u5206\u94F6\u884C\uFF08\u4E0A\u6D77/\u6C5F\u82CF/\u6D59\u6C5F/\u5B89\u5FBD\uFF09"},{x:85,y:10,role:"user",title:"\u5B66\u4E60\u8005"}],w=f(null),{nodes:r,screenWidth:b,screenHeight:R}=O(w,W),d=f(null),v=f(null),k=f(null),g=f(null),x=f(null),h=f(null),F=f(null),p=f([]),S=[{title:"\u5B66\u5206\u94F6\u884C\u90E8\u7F72\u5B66\u5206\u8F6C\u6362\u7684\u667A\u80FD\u5408\u7EA6",handler:()=>new Promise((i,o)=>{const t=r.value.filter(n=>n.role==="bank");t.length===0&&o(1);const e=t[0],s=g.value;s.style.left=e.x+"px",s.style.top=e.y+"px",s.style.opacity="1";const l=r.value.filter(n=>n.role==="block");l.length===0&&o(1);const u=l[1];g.value&&B(g.value,{x:u.x,y:u.y-64},()=>{p.value[0]=[{x:e.x,y:e.y+64},{x:u.x,y:u.y-96}],i(1)})})},{title:"\u673A\u6784\u5B58\u5165\u5B66\u4E60\u6210\u679C",handler:()=>new Promise((i,o)=>{const t=r.value.filter(n=>n.role==="institution");t.length===0&&o(1);const e=t[0],s=h.value;s.style.left=e.x+"px",s.style.top=e.y+"px",s.style.opacity="1";const l=r.value.filter(n=>n.role==="block");l.length===0&&o(1);const u=l[0];h.value&&B(h.value,{x:u.x,y:u.y-64},()=>{p.value[1]=[{x:e.x,y:e.y-64},{x:u.x,y:u.y+64}],i(1)})})},{title:"\u53D1\u8D77\u8F6C\u6362\u7533\u8BF7",handler:()=>new Promise((i,o)=>{const t=r.value.filter(n=>n.role==="bank");t.length===0&&o(1);const e=t[0],s=r.value.filter(n=>n.role==="user");s.length===0&&o(1);const l=s[0],u=d.value;u.style.right=b.value-l.x+64+"px",u.style.top=l.y+"px",u.style.opacity="1",d.value&&M(d.value,{x:e.x+64},()=>{d.value&&L(d.value,()=>i(1)),p.value[2]=[{x:l.x-64,y:l.y},{x:e.x+64,y:e.y}]})})},{title:"\u83B7\u53D6\u94FE\u4E0B\u6570\u636E",handler:()=>new Promise((i,o)=>{const t=r.value.filter(l=>l.role==="user");t.length===0&&o(1);const e=t[0],s=v.value;s.style.left=e.x+"px",s.style.top=e.y+128+"px",p.value[3]=[{x:e.x,y:e.y+64},{x:e.x,y:e.y+128}],v.value&&m(v.value,()=>i(1))})},{title:"\u5C06\u94FE\u4E0B\u6570\u636E\u53D1\u9001\u4E0A\u94FE",handler:()=>new Promise((i,o)=>{const t=r.value.filter(u=>u.role==="block");t.length===0&&o(1);const e=t[2],s=r.value.filter(u=>u.role==="user");s.length===0&&o(1);const l=s[0];v.value&&B(v.value,{x:e.x,y:e.y-64},()=>{p.value[4]=[{x:l.x,y:l.y+128},{x:e.x,y:l.y+128},{x:e.x,y:e.y-64}],i(1)})})},{title:"\u9A8C\u8BC1\u5B66\u4E60\u6210\u679C\u5E76\u5B8C\u6210\u8F6C\u6362",handler:()=>new Promise((i,o)=>{const t=r.value.filter(D=>D.role==="institution");t.length===0&&o(1);const e=t[1],s=x.value;s.style.left=e.x+"px",s.style.top=e.y-64+"px";const l=F.value;l.style.left=e.x+96+"px",l.style.top=e.y-64+"px";const u=k.value;u.style.left=e.x+"px",u.style.top=e.y-64+"px";const n=r.value.filter(D=>D.role==="block");n.length===0&&o(1);const I=n[3];h.value&&B(h.value,{x:e.x-64,y:e.y-64},()=>{x.value&&m(x.value,()=>{x.value&&L(x.value,()=>{k.value&&m(k.value,()=>{F.value&&m(F.value,()=>{l.style.opacity="0",k.value.style.opacity="0",v.value.style.opacity="0",d.value.style.opacity="0",p.value[5]=[{x:e.x,y:e.y-32},{x:I.x,y:I.y+64}],i(1)})})})})})})}],{running:V,currentStep:H}=N(S,1);return(i,o)=>(E(),A(T,null,[a("div",ee,[c(q,{current:y(H),steps:S,disabled:y(V)},null,8,["current","disabled"])]),a("div",te,[a("div",{class:"scene",ref_key:"refWindow",ref:w,style:P({minWidth:y(z)+"px",minHeight:y(G)+"px"})},[a("div",le,[(E(!0),A(T,null,Y(y(r),(t,e)=>(E(),A("div",{class:"node",style:P({left:t.x+"px",top:t.y+"px"})},[c(Q,{role:t.role,title:t.title},null,8,["role","title"])],4))),256)),c(J,{nodes:y(r),width:y(b),height:y(R)},null,8,["nodes","width","height"])]),a("div",ue,[a("div",{ref_key:"refSmartContract",ref:g,style:{opacity:0},class:"node"},[c(_,{type:"contract",title:"\u667A\u80FD\u5408\u7EA6"})],512),a("div",{ref_key:"refLearningRecords",ref:h,style:{opacity:0},class:"node"},[c(_,{type:"record",title:"\u5B66\u4E60\u6210\u679C"})],512),a("div",{ref_key:"refTransferData",ref:k,style:{opacity:0},class:"node"},[c(_,{type:"transfer",title:"\u8F6C\u6362\u673A\u5236"})],512),a("div",{ref_key:"refOffChainData",ref:v,style:{opacity:0},class:"node"},[c(_,{type:"offChain",title:"\u94FE\u4E0B\u6570\u636E"})],512),a("div",{ref_key:"refVerifyRecords",ref:x,style:{opacity:0},class:"node"},[c(_,{type:"credential",title:"\u9A8C\u8BC1\u6210\u529F"})],512),a("div",{ref_key:"refTransferedLearningRecords",ref:F,style:{opacity:0},class:"node"},[c(_,{type:"transferred",title:"\u8F6C\u6362\u540E\u7684\u5B66\u4E60\u6210\u679C"})],512),a("div",{class:"line",ref_key:"refApplyArrow",ref:d,style:{opacity:0}},oe,512)]),a("div",ne,[c(K,{pathes:p.value,width:y(b),height:y(R)},null,8,["pathes","width","height"])])],4)])],64))}});var ye=U(ae,[["__scopeId","data-v-45739c57"]]);export{ye as default};
