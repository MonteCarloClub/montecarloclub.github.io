import{a as F,d as N,r as p,b as Y,o as L,c as A,e as v,f as b,g as x,h as k,w as D,u as _,i as P,p as G,j as W,k as Z,l as ee,n as z,m as O,F as R,q,s as te,t as oe,A as ne,v as ae,x as se}from"./vendor.5c9dff22.js";const re=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}};re();const T={bankImageSize:64,blockSize:10,blockGap:2,blockNumPerRow:5},j={dataBlockSize:20},V={signalSpeed:5,signalSize:5,signalColor:"hsl(6, 0%, 54%)"};function le(e,n){F({targets:e,width:80,height:80,borderRadius:["0%","50%"],easing:"easeInOutSine",complete:n})}function ce(e,n,s){F({targets:e,width:n,height:n,backgroundColor:"#000",borderRadius:["0%"],complete:s})}function U(e,n,s){F({targets:e,left:n.x,top:n.y,easing:"easeInOutExpo",complete:s})}function H(e,n){F({targets:e,opacity:0,complete:n})}function ie(e,n){F({targets:e,width:400,complete:n})}var M=(e,n)=>{const s=e.__vccOpts||e;for(const[a,t]of n)s[a]=t;return s};const ue=e=>(G("data-v-501d45b9"),e=e(),W(),e),de={key:0},he=ue(()=>x("div",{class:"header"},[x("div",{class:"header-title"}," \u5B66\u4E60\u6210\u679C ")],-1)),fe={class:"body"},pe={class:"footer"},me=Z("\u786E\u8BA4"),ve=N({emits:["formFilled","shrinked"],setup(e,{expose:n,emit:s}){const a=p(null),t=p(!1),o=Y({username:"",class:"",score:""}),r=()=>{t.value=!0,a.value&&ie(a.value,()=>{d()})},y=()=>{s("formFilled")},i={username:"\u5C0F\u660E",class:"\u6570\u636E\u7ED3\u6784",score:"100"},d=()=>{setTimeout(()=>{let c=!1,l;for(l in o){const h=o[l].length;if(h<i[l].length){o[l]=i[l].slice(0,h+1),c=!0;break}}c?d():m()},200)},m=()=>{a.value&&le(a.value,()=>{y()})};return L(()=>{r()}),n({transformToData:()=>{t.value=!1,a.value&&ce(a.value,j.dataBlockSize,()=>{a.value&&H(a.value),s("shrinked")})}}),(c,l)=>{const h=A("a-input"),g=A("a-form-item"),I=A("a-form"),B=A("a-button");return v(),b("div",{class:"input-form",ref_key:"refData",ref:a},[t.value?(v(),b("div",de,[he,x("div",fe,[k(I,{model:_(o),name:"basic","label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",labelAlign:"left"},{default:D(()=>[k(g,{label:"\u59D3\u540D",name:"username"},{default:D(()=>[k(h,{value:_(o).username,"onUpdate:value":l[0]||(l[0]=f=>_(o).username=f)},null,8,["value"])]),_:1}),k(g,{label:"\u79D1\u76EE",name:"class"},{default:D(()=>[k(h,{value:_(o).class,"onUpdate:value":l[1]||(l[1]=f=>_(o).class=f)},null,8,["value"])]),_:1}),k(g,{label:"\u6210\u7EE9",name:"score"},{default:D(()=>[k(h,{value:_(o).score,"onUpdate:value":l[2]||(l[2]=f=>_(o).score=f)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),x("div",pe,[k(B,{type:"primary"},{default:D(()=>[me]),_:1})])])):P("",!0)],512)}}});var _e=M(ve,[["__scopeId","data-v-501d45b9"]]);function ye(e,n){const s=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),a=(n.x-e.x)/s,t=(n.y-e.y)/s;return{dis:s,dir:{x:a,y:t}}}function be(e,n,s){const a=e.width,t=e.height,o=e.getContext("2d");if(!o)return null;var r={count:n.length*2,spawnChance:.3,sparkChance:.1,sparkDist:10,sparkSize:2,speed:s.speed,neonSize:s.neonSize,repaintAlpha:.9,shadowToTimePropMult:6,color:s.color};function y(){const u=Math.round(Math.random()*(n.length-1)),c=n[u],l=c.neighbors,h=Math.round(Math.random()*(l.length-1)),g=n[l[h]],{dis:I,dir:B}=ye(c,g);return{from:c,dis:I,dir:B}}let i=[];const d=function(){this.reset()};d.prototype.reset=function(){const{from:u,dis:c,dir:l}=y();this.distance=c,this.x=u.x,this.y=u.y,this.vx=r.speed*l.x,this.vy=r.speed*l.y,this.process=0,this.color=r.color},d.prototype.step=function(){const u=this.process/this.distance;u>.99&&this.reset();const c=this.vx*(2-u),l=this.vy*(2-u);if(this.process+=Math.sqrt(c*c+l*l),this.x+=c,this.y+=l,o.shadowBlur=u*r.shadowToTimePropMult,o.fillStyle=o.shadowColor=this.color,o.fillRect(this.x,this.y,r.neonSize,r.neonSize),Math.random()<r.sparkChance){const h=this.x+Math.random()*r.sparkDist*(Math.random()<.5?1:-1)-r.sparkSize/2,g=this.y+Math.random()*r.sparkDist*(Math.random()<.5?1:-1)-r.sparkSize/2;o.fillRect(h,g,r.sparkSize,r.sparkSize)}};function m(){if(!!o){requestAnimationFrame(m);for(var u=o.getImageData(0,0,a,t).data,c=o.createImageData(a,t),l=0;l<c.data.length;l+=4){c.data[l+0]=u[l+0],c.data[l+1]=u[l+1],c.data[l+2]=u[l+2];let h=u[l+3]*r.repaintAlpha;c.data[l+3]=h>20?h:0}o.putImageData(c,0,0),i.length<r.count&&Math.random()<r.spawnChance&&i.push(new d),i.map(function(h){h.step()})}}return{init:function(){requestAnimationFrame(m)}}}const ge=N({props:{width:{type:Number,default:800},height:{type:Number,default:500},nodes:{type:Array,default:null}},setup(e){const n=e,s=ee(()=>({width:n.width,height:n.height})),a=p(null);return L(()=>{const t=a.value;if(t){t.width=n.width,t.height=n.height;var o=be(t,n.nodes,{speed:V.signalSpeed,neonSize:V.signalSize,color:V.signalColor});o==null||o.init()}}),(t,o)=>(v(),b("canvas",{ref_key:"canvasEl",ref:a,class:"path-canvas",style:z(_(s))},null,4))}});var ke=M(ge,[["__scopeId","data-v-25dbb4b2"]]);const xe=N({props:{startIndex:{type:Number,default:-1},nodes:{type:Array,default:null},blockSize:{type:Number,default:j.dataBlockSize},blockColor:{type:String,default:"#000"}},emits:["arrived","finished"],setup(e,{expose:n,emit:s}){const a=e,t=p([]),o=[],r=i=>{o[i]=!0;for(const d of a.nodes[i].neighbors)o[d]||(o[d]=!0,y(a.nodes[i],d))};function y(i,d){const m=t.value[d];m.style.left=i.x+"px",m.style.top=i.y+"px",m.style.opacity="1";const u=a.nodes[d];U(m,{x:u.x,y:u.y},()=>{H(m),s("arrived",d),r(d)})}return n({broadcastFrom:i=>{y(a.nodes[i],i)}}),(i,d)=>(v(!0),b(R,null,O(e.nodes,(m,u)=>(v(),b("div",{ref_for:!0,ref:c=>{t.value[u]=c},class:"node",style:z({opacity:0,width:e.blockSize+"px",height:e.blockSize+"px",backgroundColor:e.blockColor})},null,4))),256))}});var Se=M(xe,[["__scopeId","data-v-33086d3b"]]),we="/bank/assets/bank.4c65892f.svg";const ze=e=>(G("data-v-4a191082"),e=e(),W(),e),Ie=ze(()=>x("img",{src:we,alt:"\u5B66\u5206\u94F6\u884C"},null,-1)),Be={props:{startIndex:{type:Number,default:-1},bankSize:{type:Number,default:T.bankImageSize},blockSize:{type:Number,default:T.blockSize},blockGap:{type:Number,default:T.blockGap},blockNumPerRow:{type:Number,default:T.blockNumPerRow}},setup(e,{expose:n}){let s=p([]);return n({addBlock:t=>{s.value.push(t)}}),(t,o)=>(v(),b("div",{style:z({width:e.bankSize})},[Ie,x("div",{class:"blocks",style:z({gap:e.blockGap+"px",width:e.blockNumPerRow*e.blockSize+(e.blockNumPerRow-1)*e.blockGap+"px"})},[(v(!0),b(R,null,O(_(s),r=>(v(),b("div",{style:z({width:e.blockSize+"px",height:e.blockSize+"px",backgroundColor:r})},null,4))),256))],4)],4))}};var Fe=M(Be,[["__scopeId","data-v-4a191082"]]);const C=[{x:31,y:20,neighbors:[2,3]},{x:82,y:19,neighbors:[3,5]},{x:21,y:56,neighbors:[4]},{x:60,y:48,neighbors:[0,1,2]},{x:50,y:84,neighbors:[2,3,5]},{x:84,y:62,neighbors:[4]},{x:8,y:28,neighbors:[0,2]},{x:13,y:80,neighbors:[4,2]},{x:53,y:10,neighbors:[0,1]}];function Ne(e,n){for(let s=0;s<C.length;s++){const a=C[s];a.x=Math.round(a.x/100*e),a.y=Math.round(a.y/100*n),a.neighbors.forEach(t=>{C[t].neighbors.includes(s)||C[t].neighbors.push(s)})}return C}const De={class:"fullscreen"},Me=N({setup(e){const n=p(null);let s=p([]),a=p(0),t=p(0);L(()=>{var w;const f=(w=n.value)==null?void 0:w.getClientRects();if(f&&(f==null?void 0:f.length)>0){const{width:S,height:E}=f[0];s.value=Ne(S,E),t.value=E,a.value=S,r()}});const o=p(!1),r=()=>{o.value=!0},y=p(null),i=p(null),d=p(-1),m=p(!1),u=()=>{d.value=Math.round(Math.random()*(s.value.length-1));const f=s.value[d.value],{x:w,y:S}=f;y.value&&U(y.value,{x:w,y:S},()=>{i.value&&(i.value.transformToData(),m.value=!0)})},c=p(null),l=()=>{c.value&&(c.value.broadcastFrom(d.value),o.value=!1)},h=p([]);let g=0;const I=f=>{h.value[f].addBlock("#000"),g+=1,g===s.value.length&&(g=0,B())},B=()=>{m.value=!1,r()};return(f,w)=>(v(),b(R,null,[x("div",{ref_key:"refWindow",ref:n,class:"fullscreen"},[_(a)>0?(v(),q(ke,{key:0,width:_(a),height:_(t),nodes:_(s)},null,8,["width","height","nodes"])):P("",!0),m.value?(v(),q(Se,{key:1,ref_key:"refBroadcast",ref:c,nodes:_(s),startIndex:d.value,onArrived:I},null,8,["nodes","startIndex"])):P("",!0),(v(!0),b(R,null,O(_(s),(S,E)=>(v(),b("div",{class:"node",style:z({left:S.x+"px",top:S.y+"px"})},[k(Fe,{ref_for:!0,ref:X=>{h.value[E]=X}},null,512)],4))),256))],512),x("div",De,[o.value?(v(),b("div",{key:0,ref_key:"refDataSource",ref:y,class:"data-source"},[k(_e,{onFormFilled:u,onShrinked:l,ref_key:"refDataSourceForm",ref:i},null,512)],512)):P("",!0)])],64))}});var K=M(Me,[["__scopeId","data-v-602c656f"]]),Ce=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:K});const Ee=N({setup(e){return(n,s)=>(v(),q(K))}}),Ae="modulepreload",J={},Pe="/bank/",Re=function(n,s){return!s||s.length===0?n():Promise.all(s.map(a=>{if(a=`${Pe}${a}`,a in J)return;J[a]=!0;const t=a.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${o}`))return;const r=document.createElement("link");if(r.rel=t?"stylesheet":Ae,t||(r.as="script",r.crossOrigin=""),r.href=a,document.head.appendChild(r),t)return new Promise((y,i)=>{r.addEventListener("load",y),r.addEventListener("error",i)})})).then(()=>n())},Q=te({history:oe(),routes:[{path:"/",component:()=>Re(()=>Promise.resolve().then(function(){return Ce}),void 0)}]});function Te(e){e.use(Q)}function $e(e){e.use(ne)}const Le=ae({state(){return{count:0}},mutations:{increment(e){e.count++}}}),Oe=Symbol();function qe(e){e.use(Le,Oe)}const $=se(Ee);Te($);$e($);qe($);Q.isReady().then(()=>{$.mount("#app")});
