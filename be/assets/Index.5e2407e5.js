import{e as I,f as C,q as D,o as T,c as b,a as E,u as f,d as _,t as N,F as M}from"./vendor.a082a7f9.js";import{K as S,a as q,b as z}from"./constants.2db1f95c.js";import{_ as F}from"./index.ddb9a71a.js";function K(i,n){const{text:o,radius:a,color:c,size:m,gap:u,textX:H,textY:P,fontSize:v,speed:y}=n,e=i.getContext("2d"),h=i.width,p=i.height;var l=[],d={x:0,y:0};let x=Date.now();const X=5e3/h;function g(s,t,r){this.dest={x:s,y:t},this.r=m,this.x=s,this.y=0,this.vx=0,this.vy=y+Math.random()*y,this.accX=0,this.accY=0,this.friction=Math.random()*.05+.9,this.color=c,this.activeTime=r}g.prototype.render=function(){if(!(this.activeTime>x)){this.accX=(this.dest.x-this.x)/500,this.accY=(this.dest.y-this.y)/500,this.vx+=this.accX,this.vy+=this.accY,this.vx*=this.friction,this.vy*=this.friction,this.x+=this.vx,this.y+=this.vy,e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.r,Math.PI*2,!1),e.fill();var s=this.x-d.x,t=this.y-d.y,r=Math.sqrt(s*s+t*t);r<a&&(this.accX=(this.x-d.x)/500,this.accY=(this.y-d.y)/500,this.vx+=this.accX,this.vy+=this.accY)}};function Y(){e.clearRect(0,0,i.width,i.height),e.font=`bold ${v}px sans-serif`,e.fillText(o,H,P+v);var s=e.getImageData(0,0,h,p).data;e.clearRect(0,0,h,p),e.globalCompositeOperation="screen",l=[];for(var t=0;t<h;t+=u)for(var r=0;r<p;r+=u)s[(t+r*h)*4+3]>150&&l.push(new g(t,r,A(t)));console.info(`\u7C92\u5B50\u6570 ${l.length}`)}function A(s){return x+s*X}function w(s){requestAnimationFrame(w),e.clearRect(0,0,i.width,i.height),x=Date.now(),l.map(t=>t.render())}return{init:function(){Y(),requestAnimationFrame(w)}}}const R=I({props:{width:{type:Number,default:500},height:{type:Number,default:300},text:{type:String,default:"Hello World"}},setup(i){const n=i,o=C(null);return D(()=>{const a=o.value;if(a){a.width=n.width,a.height=n.height;var c=K(a,{text:n.text,color:"#000000",fontSize:36,radius:50,textX:24,textY:n.height-64,size:1,gap:2,speed:5});c.init()}}),(a,c)=>(T(),b("canvas",{ref_key:"canvasEl",ref:o},null,512))}});const j={class:"page"},k={class:"desc"},B=I({setup(i){const n=S,o=q,a=z,c=window.innerWidth;return(m,u)=>(T(),b(M,null,[E(R,{text:f(n),width:f(c),height:160},null,8,["text","width"]),_("div",j,[_("h2",null,N(f(o)),1),_("div",k,N(f(a)),1)])],64))}});var V=F(B,[["__scopeId","data-v-a0a29f30"]]);export{V as default};
